!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&"object"==typeof module.exports?exports=t(require("jquery")):t(jQuery)}(function(e){function n(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}void 0!==e.easing&&(e.easing.jswing=e.easing.swing);var i=Math.pow,r=Math.sqrt,s=Math.sin,a=Math.cos,o=Math.PI,l=1.70158,u=1.525*l,c=2*o/3,d=2*o/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-(1-t)*(1-t)},easeInOutQuad:function(t){return t<.5?2*t*t:1-i(-2*t+2,2)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-i(1-t,3)},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-i(-2*t+2,3)/2},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-i(1-t,4)},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-i(-2*t+2,4)/2},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-i(1-t,5)},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-i(-2*t+2,5)/2},easeInSine:function(t){return 1-a(t*o/2)},easeOutSine:function(t){return s(t*o/2)},easeInOutSine:function(t){return-(a(o*t)-1)/2},easeInExpo:function(t){return 0===t?0:i(2,10*t-10)},easeOutExpo:function(t){return 1===t?1:1-i(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?i(2,20*t-10)/2:(2-i(2,-20*t+10))/2},easeInCirc:function(t){return 1-r(1-i(t,2))},easeOutCirc:function(t){return r(1-i(t-1,2))},easeInOutCirc:function(t){return t<.5?(1-r(1-i(2*t,2)))/2:(r(1-i(-2*t+2,2))+1)/2},easeInElastic:function(t){return 0===t?0:1===t?1:-i(2,10*t-10)*s((10*t-10.75)*c)},easeOutElastic:function(t){return 0===t?0:1===t?1:i(2,-10*t)*s((10*t-.75)*c)+1},easeInOutElastic:function(t){return 0===t?0:1===t?1:t<.5?-(i(2,20*t-10)*s((20*t-11.125)*d))/2:i(2,-20*t+10)*s((20*t-11.125)*d)/2+1},easeInBack:function(t){return(1+l)*t*t*t-l*t*t},easeOutBack:function(t){return 1+(1+l)*i(t-1,3)+l*i(t-1,2)},easeInOutBack:function(t){return t<.5?i(2*t,2)*(7.189819*t-u)/2:(i(2*t-2,2)*((1+u)*(2*t-2)+u)+2)/2},easeInBounce:function(t){return 1-n(1-t)},easeOutBounce:n,easeInOutBounce:function(t){return t<.5?(1-n(1-2*t))/2:(1+n(2*t-1))/2}})}),function(t){var l,u,c,e,o,a,d,p,h,m,I,E,f,g,$,k,_,i,M,D,j,v,w,P,z,L,T,U,b,y,C,r=function(t){return new r.prototype.init(t)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=r:t.Globalize=r,r.cultures={},(r.prototype={constructor:r,init:function(t){return this.cultures=r.cultures,this.cultureSelector=t,this}}).init.prototype=r.prototype,r.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},r.cultures.default.calendar=r.cultures.default.calendars.standard,r.cultures.en=r.cultures.default,r.cultureSelector="en",l=/^0x[a-f0-9]+$/i,u=/^[+\-]?infinity$/i,c=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,e=/^\s+|\s+$/g,o=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},a=function(t,e){return t.substr(t.length-e.length)===e},d=function(){var t,e,n,i,r,s=arguments[0]||{},a=1,o=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2),"object"==typeof s||h(s)||(s={});a<o;a++)if(null!=(t=arguments[a]))for(e in t)r=s[e],n=t[e],s!==n&&(l&&n&&(m(n)||(i=p(n)))?(r=i?(i=!1,r&&p(r)?r:[]):r&&m(r)?r:{},s[e]=d(l,r,n)):void 0!==n&&(s[e]=n));return s},p=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},h=function(t){return"[object Function]"===Object.prototype.toString.call(t)},m=function(t){return"[object Object]"===Object.prototype.toString.call(t)},I=function(t,e){return 0===t.indexOf(e)},E=function(t){return(t+"").replace(e,"")},f=function(t){return isNaN(t)?NaN:Math[t<0?"ceil":"floor"](t)},g=function(t,e,n){for(var i=t.length;i<e;i+=1)t=n?"0"+t:t+"0";return t},$=function(t,e){for(var n,i=0,r=!1,s=0,a=t.length;s<a;s++)switch(n=t.charAt(s)){case"'":r?e.push("'"):i++,r=!1;break;case"\\":r&&e.push("\\"),r=!r;break;default:e.push(n),r=!1}return i},k=function(t,e){var t=t.patterns,n=(e=e||"F").length;if(1===n){if(!(t=t[e]))throw"Invalid date format string '"+e+"'.";e=t}else 2===n&&"%"===e.charAt(0)&&(e=e.charAt(1));return e},_=function(t,e,n){function i(t,e){var n,t=t+"";return 1<e&&t.length<e?(n=b[e-2]+t).substr(n.length-e,e):t}function r(t,e){if(v)return v[e];switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();default:throw"Invalid part value "+e}}var s,a,o,l,u,c,d,h=n.calendar,p=h.convert;if(!e||!e.length||"i"===e)return w=n&&n.name.length?p?_(t,h.patterns.F,n):(n=new Date(t.getTime()),s=D(t,h.eras),n.setFullYear(j(t,h,s)),n.toLocaleString()):t.toString();a=h.eras,o="s"===e,e=k(h,e);var m,f,g,v,w=[],b=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,C=0,x=M();for(!o&&p&&(v=p.fromGregorian(t));;){var A=x.lastIndex,S=x.exec(e),A=e.slice(A,S?S.index:e.length);if(C+=$(A,w),!S)break;if(C%2)w.push(S[0]);else switch(u=(l=S[0]).length,l){case"ddd":case"dddd":c=3===u?h.days.namesAbbr:h.days.names,w.push(c[t.getDay()]);break;case"d":case"dd":f=!0,w.push(i(r(t,2),u));break;case"MMM":case"MMMM":d=r(t,1),w.push((h.monthsGenitive&&(f||g||(f=y.test(e),g=!0),f)?h.monthsGenitive:h.months)[3===u?"namesAbbr":"names"][d]);break;case"M":case"MM":w.push(i(r(t,1)+1,u));break;case"y":case"yy":case"yyyy":d=v?v[0]:j(t,h,D(t,a),o),u<4&&(d%=100),w.push(i(d,u));break;case"h":case"hh":0===(m=t.getHours()%12)&&(m=12),w.push(i(m,u));break;case"H":case"HH":w.push(i(t.getHours(),u));break;case"m":case"mm":w.push(i(t.getMinutes(),u));break;case"s":case"ss":w.push(i(t.getSeconds(),u));break;case"t":case"tt":d=t.getHours()<12?h.AM?h.AM[0]:" ":h.PM?h.PM[0]:" ",w.push(1===u?d.charAt(0):d);break;case"f":case"ff":case"fff":w.push(i(t.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":m=t.getTimezoneOffset()/60,w.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),u));break;case"zzz":m=t.getTimezoneOffset()/60,w.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),2)+":"+i(Math.abs(t.getTimezoneOffset()%60),2));break;case"g":case"gg":h.eras&&w.push(h.eras[D(t,a)].name);break;case"/":w.push(h["/"]);break;default:throw"Invalid date format pattern '"+l+"'."}}return w.join("")},C=function(t,e,n){var i=n.groupSizes,r=i[0],s=1,a=Math.pow(10,e),a=Math.round(t*a)/a,o=(t=a=isFinite(a)?a:t)+"",l="",a=o.split(/e/i),t=1<a.length?parseInt(a[1],10):0;o=(a=(o=a[0]).split("."))[0],l=1<a.length?a[1]:"",0<t?(o+=(l=g(l,t,!1)).slice(0,t),l=l.substr(t)):t<0&&(l=(o=g(o,1+(t=-t),!0)).slice(-t,o.length)+l,o=o.slice(0,-t));for(var l=0<e?n["."]+(l.length>e?l.slice(0,e):g(l,e)):"",u=o.length-1,c=n[","],d="";0<=u;){if(0===r||u<r)return o.slice(0,u+1)+(d.length?c+d+l:l);d=o.slice(u-r+1,u+1)+(d.length?c+d:""),u-=r,s<i.length&&(r=i[s],s++)}return o.slice(0,u+1)+c+d+l},i=function(t,e,n){var i,r,s,a,o,l;if(!isFinite(t))return t===1/0?n.numberFormat.positiveInfinity:t===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!e||"i"===e)return n.name.length?t.toLocaleString():t.toString();e=e||"D";var u,c=n.numberFormat,d=Math.abs(t),h=-1;switch(1<e.length&&(h=parseInt(e.slice(1),10)),i=e.charAt(0).toUpperCase()){case"D":u="n",d=f(d),-1!==h&&(d=g(""+d,h,!0)),t<0&&(d="-"+d);break;case"N":r=c;case"C":r=r||c.currency;case"P":r=r||c.percent,u=t<0?r.pattern[0]:r.pattern[1]||"n",-1===h&&(h=r.decimals),d=C(d*("P"===i?100:1),h,r);break;default:throw"Bad number format specifier: "+i}for(s=/n|\$|-|%/g,a="";o=s.lastIndex,l=s.exec(u),a+=u.slice(o,l?l.index:u.length),l;)switch(l[0]){case"n":a+=d;break;case"$":a+=c.currency.symbol;break;case"-":/[1-9]/.test(d)&&(a+=c["-"]);break;case"%":a+=c.percent.symbol}return a},M=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},D=function(t,e){var n,i,r,s;if(e)for(i=t.getTime(),r=0,s=e.length;r<s;r++)if(null===(n=e[r].start)||n<=i)return r;return 0},j=function(t,e,n,i){t=t.getFullYear();return!i&&e.eras&&(t-=e.eras[n].offset),t},P=function(t,e){var n,i;return e<100&&(n=new Date,i=D(n),n=j(n,t,i),(i="string"==typeof(i=t.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i)<(e+=n-n%100))&&(e-=100),e},z=function(t,e,n){var i,r=t.days,s=t._upperDays;return s||(t._upperDays=s=[y(r.names),y(r.namesAbbr),y(r.namesShort)]),e=b(e),n?-1===(i=o(s[1],e))&&(i=o(s[2],e)):i=o(s[0],e),i},L=function(t,e,n){var i=t.months,r=t.monthsGenitive||t.months,s=t._upperMonths,a=t._upperMonthsGen;return s||(t._upperMonths=s=[y(i.names),y(i.namesAbbr)],t._upperMonthsGen=a=[y(r.names),y(r.namesAbbr)]),e=b(e),i=(i=o(n?s[1]:s[0],e))<0?o(n?a[1]:a[0],e):i},T=function(t,e){var n,i,r,s,a,o=t._parseRegExp;if(o){if(a=o[e])return a}else t._parseRegExp=o={};for(var l,u=k(t,e).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],d=[],h=0,p=0,m=M();null!==(l=m.exec(u));)if(n=u.slice(h,l.index),h=m.lastIndex,(p+=$(n,c))%2)c.push(l[0]);else{switch(r=(i=l[0]).length,i){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":s="(\\D+)";break;case"tt":case"t":s="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":s="(\\d{"+r+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":s="(\\d\\d?)";break;case"zzz":s="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":s="([+-]?\\d\\d?)";break;case"/":s="(\\/)";break;default:throw"Invalid date format pattern '"+i+"'."}s&&c.push(s),d.push(l[0])}return $(u.slice(h),c),c.push("$"),a=c.join("").replace(/\s+/g,"\\s+"),o[e]={regExp:a,groups:d}},U=function(t,e,n){return t<e||n<t},b=function(t){return t.split(" ").join(" ").toUpperCase()},y=function(t){for(var e=[],n=0,i=t.length;n<i;n++)e[n]=b(t[n]);return e},v=function(t,e,n){t=E(t);var i,r,s,a,o,l,u=n.calendar,n=T(u,e),c=new RegExp(n.regExp).exec(t);if(null===c)return null;for(var d,h=n.groups,p=null,m=null,f=null,g=null,v=null,w=0,b=0,y=0,C=0,x=null,A=!1,S=0,$=h.length;S<$;S++)if(i=c[S+1]){var k=h[S],_=k.length,M=parseInt(i,10);switch(k){case"dd":case"d":if(U(g=M,1,31))return null;break;case"MMM":case"MMMM":if(f=L(u,i,3===_),U(f,0,11))return null;break;case"M":case"MM":if(U(f=M-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(m=_<4?P(u,M):M,U(m,0,9999))return null;break;case"h":case"hh":if(U(w=12===(w=M)?0:w,0,11))return null;break;case"H":case"HH":if(U(w=M,0,23))return null;break;case"m":case"mm":if(U(b=M,0,59))return null;break;case"s":case"ss":if(U(y=M,0,59))return null;break;case"tt":case"t":if((A=u.PM&&(i===u.PM[0]||i===u.PM[1]||i===u.PM[2]))||u.AM&&(i===u.AM[0]||i===u.AM[1]||i===u.AM[2]))break;return null;case"f":case"ff":case"fff":if(C=M*Math.pow(10,3-_),U(C,0,999))return null;break;case"ddd":case"dddd":if(v=z(u,i,3===_),U(v,0,6))return null;break;case"zzz":if(2!==(r=i.split(/:/)).length||(d=parseInt(r[0],10),U(d,-12,13))||(s=parseInt(r[1],10),U(s,0,59)))return null;x=60*d+(I(i,"-")?-s:s);break;case"z":case"zz":if(U(d=M,-12,13))return null;x=60*d;break;case"g":case"gg":if(!(a=i)||!u.eras)return null;for(a=E(a.toLowerCase()),o=0,l=u.eras.length;o<l;o++)if(a===u.eras[o].name.toLowerCase()){p=o;break}if(null===p)return null}}if(e=new Date,n=(t=u.convert)?t.fromGregorian(e)[0]:e.getFullYear(),null===m?m=n:u.eras&&(m+=u.eras[p||0].offset),null===f&&(f=0),null===g&&(g=1),t){if(null===(e=t.toGregorian(m,f,g)))return null}else if(e.setFullYear(m,f,g),e.getDate()!==g||null!==v&&e.getDay()!==v)return null;return A&&w<12&&(w+=12),e.setHours(w,b,y,C),null!==x&&(n=e.getMinutes()-(x+e.getTimezoneOffset()),e.setHours(e.getHours()+parseInt(n/60,10),n%60)),e},w=function(t,e,n){var i,r=e["-"],s=e["+"];switch(n){case"n -":r=" "+r,s=" "+s;case"n-":a(t,r)?i=["-",t.substr(0,t.length-r.length)]:a(t,s)&&(i=["+",t.substr(0,t.length-s.length)]);break;case"- n":r+=" ",s+=" ";case"-n":I(t,r)?i=["-",t.substr(r.length)]:I(t,s)&&(i=["+",t.substr(s.length)]);break;case"(n)":I(t,"(")&&a(t,")")&&(i=["-",t.substr(1,t.length-2)])}return i||["",t]},r.prototype.findClosestCulture=function(t){return r.findClosestCulture.call(this,t)},r.prototype.format=function(t,e,n){return r.format.call(this,t,e,n)},r.prototype.localize=function(t,e){return r.localize.call(this,t,e)},r.prototype.parseInt=function(t,e,n){return r.parseInt.call(this,t,e,n)},r.prototype.parseFloat=function(t,e,n){return r.parseFloat.call(this,t,e,n)},r.prototype.culture=function(t){return r.culture.call(this,t)},r.addCultureInfo=function(t,e,n){var i={},r=!1,i="string"!=typeof t?(n=t,t=this.culture().name,this.cultures[t]):"string"!=typeof e?(n=e,r=null==this.cultures[t],this.cultures[t]||this.cultures.default):(r=!0,this.cultures[e]);this.cultures[t]=d(!0,{},i,n),r&&(this.cultures[t].calendar=this.cultures[t].calendars.standard)},r.findClosestCulture=function(t){var e,n,i,r,s,a;if(!t)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof t&&(t=t.split(",")),p(t)){for(var o,l=this.cultures,u=t,c=u.length,d=[],h=0;h<c;h++)i=(t=E(u[h])).split(";"),o=E(i[0]),n=1!==i.length&&0===(t=E(i[1])).indexOf("q=")?(t=t.substr(2),n=parseFloat(t),isNaN(n)?0:n):1,d.push({lang:o,pri:n});for(d.sort(function(t,e){return t.pri<e.pri?1:t.pri>e.pri?-1:0}),h=0;h<c;h++)if(e=l[o=d[h].lang])return e;for(h=0;h<c;h++)for(o=d[h].lang;;){if(-1===(r=o.lastIndexOf("-")))break;if(e=l[o=o.substr(0,r)])return e}for(h=0;h<c;h++)for(s in o=d[h].lang,l)if(a=l[s],a.language==o)return a}else if("object"==typeof t)return t;return e||null},r.format=function(t,e,n){n=this.findClosestCulture(n);return t instanceof Date?t=_(t,e,n):"number"==typeof t&&(t=i(t,e,n)),t},r.localize=function(t,e){return this.findClosestCulture(e).messages[t]||this.cultures.default.messages[t]},r.parseDate=function(t,e,n){var i,r,s,a,o,l;if(n=this.findClosestCulture(n),e){if((e="string"==typeof e?[e]:e).length)for(a=0,o=e.length;a<o&&(!(l=e[a])||!(i=v(t,l,n)));a++);}else for(r in s=n.calendar.patterns)if(i=v(t,s[r],n),i)break;return i||null},r.parseInt=function(t,e,n){return f(r.parseFloat(t,e,n))},r.parseFloat=function(t,e,n){"number"!=typeof e&&(n=e,e=10);var i,r,s,n=this.findClosestCulture(n),a=NaN,o=n.numberFormat;return-1<t.indexOf(n.numberFormat.currency.symbol)&&(t=(t=t.replace(n.numberFormat.currency.symbol,"")).replace(n.numberFormat.currency["."],n.numberFormat["."])),t=E(t),u.test(t)?a=parseFloat(t):!e&&l.test(t)?a=parseInt(t,16):(e=(n=w(t,o,o.pattern[0]))[0],s=n[1],""===e&&"(n)"!==o.pattern[0]&&(e=(n=w(t,o,"(n)"))[0],s=n[1]),""===e&&"-n"!==o.pattern[0]&&(e=(n=w(t,o,"-n"))[0],s=n[1]),e=e||"+",n=(t=(t=s.indexOf("e"))<0?s.indexOf("E"):t)<0?(r=s,null):(r=s.substr(0,t),s.substr(t+1)),s=o["."],r=(t=r.indexOf(s))<0?(i=r,null):(i=r.substr(0,t),r.substr(t+s.length)),t=o[","],i=i.split(t).join(""),s=t.replace(/\u00A0/g," "),e=e+(i=t!==s?i.split(s).join(""):i),null!==r&&(e+="."+r),null!==n&&(e+="e"+((t=w(n,o,"-n"))[0]||"+")+t[1]),c.test(e)&&(a=parseFloat(e))),a},r.culture=function(t){return void 0!==t&&(this.cultureSelector=t),this.findClosestCulture(t)||this.cultures.default}}(this),function(e,n){var t=n.jQuery;"object"==typeof exports?module.exports=t?e(n,t):function(t){if(t&&!t.fn)throw"Provide jQuery or null";return e(n,t)}:"function"==typeof define&&define.amd?define(function(){return e(n)}):e(n,!1)}(function(c,J){"use strict";function w(n,i){return function(){var t,e=this.base;return this.base=n,t=i.apply(this,arguments),this.base=e,t}}function l(t,e){return S(e)&&((e=w(t?t._d?t:w(u,t):u,e))._d=(t&&t._d||0)+1),e}function F(t,e){var n,i=e.props;for(n in i)!bt.test(n)||t[n]&&t[n].fix||(t[n]="convert"!==n?l(t.constructor.prototype[n],i[n]):i[n])}function t(t){return t}function u(){return""}function e(t){this.name=(J.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function x(t,e){if(t){for(var n in e)t[n]=e[n];return t}}function b(t,e,n){return t?W(t)?b.apply(v,t):(h=n?n[0]:h,/^(\W|_){5}$/.test(t+e+h)||B("Invalid delimiters"),a=t[0],i=t[1],o=e[0],d=e[1],N.delimiters=[a+i,o+d,h],t="\\"+a+"(\\"+h+")?\\"+i,e="\\"+o+"\\"+d,r="(?:(\\w+(?=[\\/\\s\\"+o+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+o+"]|\\"+o+"(?!\\"+d+"))*?)",Y.rTag="(?:"+r+")",r=new RegExp("(?:"+t+r+"(\\/)?|\\"+a+"(\\"+h+")?\\"+i+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+e,"g"),Y.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+t+".*"+e),s):N.delimiters}function $(){var t=this.get("item");return t?t.index:void 0}function k(){return this.index}function _(t,e,n,i){var r,s,a,o=0;if(1===n&&(i=1,n=void 0),e)for(a=(s=e.split(".")).length;t&&o<a;o++)r=t,t=s[o]?t[s[o]]:t;return n&&(n.lt=n.lt||o<a),void 0===t?i?u:"":i?function(){return t.apply(r,arguments)}:t}function H(t,e,n){var i,r,s,a,o=this,l=!m&&1<arguments.length,u=o.ctx;if(t){if(o._||(s=o.index,o=o.tag),a=o,u&&u.hasOwnProperty(t)||(u=ut).hasOwnProperty(t)){if(r=u[t],"tag"===t||"tagCtx"===t||"root"===t||"parentTags"===t)return r}else u=void 0;if((!m&&o.tagCtx||o.linked)&&(r&&r._cxp||(o=!o.tagCtx&&!S(r)&&!(o=o.scope||o).isTop&&o.ctx.tag||o,u=(o=void 0!==r&&o.tagCtx?o.tagCtx.view.scope:o)._ocps,(r=u&&u.hasOwnProperty(t)&&u[t]||r)&&r._cxp)||!n&&!l||((u||(o._ocps=o._ocps||{}))[t]=r=[{_ocp:r,_vw:a,_key:t}],r._cxp={path:dt,ind:0,updateValue:function(t,e){return J.observable(r[0]).setProperty(dt,t),this}}),n=r&&r._cxp)){if(2<arguments.length)return(u=r[1]?Y._ceo(r[1].deps):[dt]).unshift(r[0]),u._cxp=n,u;if(s=n.tagElse,u=r[1]?n.tag&&n.tag.cvtArgs?n.tag.cvtArgs(s,1)[n.ind]:r[1](r[0].data,r[0],Y):r[0]._ocp,l)return Y._ucp(t,e,o,n),o;r=u}return r&&S(r)&&x(i=function(){return r.apply(this&&this!==c?this:a,arguments)},r),i||r}}function G(t,e){var n,i,r,s,a,o,l,u=this;if(u.tagName){if(!(u=((o=u).tagCtxs||[u])[t||0]))return}else o=u.tag;if(a=o.bindFrom,s=u.args,(l=(l=o.convert)&&""+l===l?"true"===l?void 0:u.view.getRsc("converters",l)||B("Unknown converter: '"+l+"'"):l)&&!e&&(s=s.slice()),a){for(r=[],n=a.length;n--;)i=a[n],r.unshift(K(u,i));e&&(s=r)}if(l){if(void 0===(l=l.apply(o,r||s)))return s;if(n=(a=a||[0]).length,W(l)&&(!1===l.arg0||1!==n&&l.length===n&&!l.arg0)||(l=[l],a=[0],n=1),e)s=l;else for(;n--;)+(i=a[n])===i&&(s[i]=l[n])}return s}function K(t,e){return(t=t[+e===e?"args":"props"])&&t[e]}function X(t){return this.cvtArgs(t,1)}function A(t,e,n,i,r,s,a,o){var l=this,u="array"===e;l.content=o,l.views=u?[]:{},l.data=i,l.tmpl=r,o=l._={key:0,useKey:u?0:1,id:""+$t++,onRender:a,bnds:{}},l.linked=!!a,l.type=e||"top",e&&(l.cache={_ct:N._cchCt}),n&&"top"!==n.type||((l.ctx=t||{}).root=l.data),(l.parent=n)?(l.root=n.root||l,i=n.views,r=n._,l.isTop=r.scp,l.scope=(!t.tag||t.tag===n.ctx.tag)&&!l.isTop&&n.scope||l,r.useKey?((i[o.key="_"+r.useKey++]=l).index=Et,l.getIndex=$):i.length===(o.key=l.index=s)?i.push(l):i.splice(s,0,l),l.ctx=t||n.ctx):e&&(l.root=l)}function y(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0})}function tt(t,e){var n,i=Z._wm||{},r={tmpls:[],links:{},bnds:[],_is:"template",render:et};return(r=e?x(r,e):r).markup=t,r.htmlTag||(n=vt.exec(t),r.htmlTag=n?n[1].toLowerCase():""),(n=i[r.htmlTag])&&n!==i.div&&(r.markup=J.trim(r.markup)),r}function M(l,u){var c=l+"s";v[c]=function t(e,n,i){var r,s,a,o=Y.onStore[l];if(!e||typeof e!==Mt||e.nodeType||e.markup||e.getTgt||"viewModel"===l&&e.getters||e.extend)return e&&""+e!==e&&(i=n,n=e,e=void 0),a=i?"viewModel"===l?i:i[c]=i[c]||{}:t,r=u.compile,void 0===n&&(n=r?e:a[e],e=void 0),null===n?e&&delete a[e]:(r&&((n=r.call(a,e,n,i,0)||{})._is=l),e&&(a[e]=n)),o&&o(e,n,i,r),n;for(s in e)t(s,e[s],n);return n||v}}function I(e){s[e]=s[e]||function(t){return arguments.length?(N[e]=t,s):N[e]}}function E(n){function i(t,e){this.tgt=n.getTgt(t,e),e.map=this}return(n=(n=S(n)?{getTgt:n}:n).baseMap?x(x({},n.baseMap),n):n).map=function(t,e){return new i(t,e)},n}function et(t,e,n,i,r,s){var a,o,l,u,c,d,h=i,p="";if(!0===e?(n=e,e=void 0):typeof e!==Mt&&(e=void 0),(l=this.tag)?(u=(h=h||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(t=l.contentCtx&&S(l.contentCtx)?l.contentCtx(t):h)):u=this,u){if((h=!i&&t&&"view"===t._is?t:h)&&t===h&&(t=h.data),i=!h,m=m||i,i&&((e=e||{}).root=t),!m||Z.useViews||u.useViews||h&&h!==R)p=nt(u,t,e,n,h,r,s,l);else{if(h?(c=h.data,d=h.index,h.index=Et):(c=(h=R).data,h.data=t,h.ctx=e),W(t)&&!n)for(a=0,o=t.length;a<o;a++)h.index=a,h.data=t[a],p+=u.fn(t[a],h,Y);else h.data=t,p+=u.fn(t,h,Y);h.data=c,h.index=d}i&&(m=void 0)}return p}function nt(t,e,n,i,r,s,a,o){var l,u,c,d,h,p,m,f,g,v,w,b,y,C="";if(o&&(g=o.tagName,b=o.tagCtx,n=n?O(n,o.ctx):o.ctx,t===r.content?m=t!==r.ctx._wrp?r.ctx._wrp:void 0:t!==b.content?t===o.template?(m=b.tmpl,n._wrp=b.content):m=b.content||r.content:m=r.content,!1===b.props.link)&&((n=n||{}).link=!1),r&&(a=a||r._.onRender,(y=n&&!1===n.link)&&r._.nl&&(a=void 0),n=O(n,r.ctx),b=!o&&r.tag?r.tag.tagCtxs[r.tagElse]:b),(v=b&&b.props.itemVar)&&("~"!==v[0]&&Q("Use itemVar='~myItem'"),v=v.slice(1)),!0===s&&(p=!0,s=0),!0===(f=a=a&&o&&o._.noVws?void 0:a)&&(f=void 0,a=r._.onRender),w=n=t.helpers?O(t.helpers,n):n,W(e)&&!i)for((c=p?r:void 0!==s&&r||new A(n,"array",r,e,t,s,a,m))._.nl=y,r&&r._.useKey&&(c._.bnd=!o||o._.bnd&&o,c.tag=o),l=0,u=e.length;l<u;l++)d=new A(w,"item",c,e[l],t,(s||0)+l,a,c.content),v&&((d.ctx=x({},w))[v]=Y._cp(e[l],"#data",d)),h=t.fn(e[l],d,Y),C+=c._.onRender?c._.onRender(h,d):h;else c=p?r:new A(w,g||"data",r,e,t,s,a,m),v&&((c.ctx=x({},w))[v]=Y._cp(e,"#data",c)),c.tag=o,c._.nl=y,C+=t.fn(e,c,Y);return o&&(c.tagElse=b.index,b.contentView=c),f?f(C,c):C}function B(t){throw new Y.Err(t)}function Q(t){B("Syntax error\n"+t)}function D(A,S,$,k,_){function M(t){(t-=P)&&L.push(A.substr(P,t).replace(ht,"\\n"))}function I(t,e){t&&(t+="}}",Q((e?"{{"+e+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+A))}var t,e,E,D,n,j=N.allowCode||S&&S.allowCode||!0===s.allowCode,i=[],P=0,z=[],L=i,T=[,,i];if(j&&S._is&&(S.allowCode=j),$&&(void 0!==k&&(A=A.slice(0,-k.length-2)+o),A=a+A+d),I(z[0]&&z[0][2].pop()[0]),A.replace(r,function(t,e,n,i,r,s,a,o,l,u,c,d){(a&&e||l&&!n||o&&":"===o.slice(-1)||u)&&Q(t),s&&(r=":",i=V);var h,p,m,u=(e||$)&&[[]],f="",g="",v="",w="",b="",y="",C="",x="",s=!(l=l||$&&!_)&&!r;n=n||(o=o||"#data",r),M(d),P=d+t.length,a?j&&L.push(["*","\n"+o.replace(/^:/,"ret+= ").replace(pt,"$1")+";\n"]):n?("else"===n&&(gt.test(o)&&Q('For "{{else if expr}}" use "{{else expr}}"'),u=T[9]&&[[]],T[10]=A.substring(T[10],d),p=T[11]||T[0]||Q("Mismatched: "+t),T=z.pop(),L=T[2],s=!0),o&&st(o.replace(ht," "),u,S,$).replace(ft,function(t,e,n,i,r,s,a,o){return"this:"===i&&(s="undefined"),o&&(m=m||"@"===o[0]),i="'"+r+"':",a?(g+=n+s+",",w+="'"+o+"',"):n?(v+=i+"j._cp("+s+',"'+o+'",view),',y+=i+"'"+o+"',"):e?C+=s:("trigger"===r&&(x+=s),"lateRender"===r&&(h="false"!==o),f+=i+s+",",b+=i+"'"+o+"',",D=D||bt.test(r)),""}).slice(0,-1),u&&u[0]&&u.pop(),E=[n,i||!!k||D||"",s&&[],rt(w||(":"===n?"'#data',":""),b,y),rt(g||(":"===n?"data,":""),f,v),C,x,h,m,u||0],L.push(E),s&&(z.push(T),(T=E)[10]=P,T[11]=p)):c&&(I(c!==T[0]&&c!==T[11]&&c,T[0]),T[10]=A.substring(T[10],d),T=z.pop()),I(!T&&c),L=T[2]}),M(A.length),(P=i[i.length-1])&&I(""+P!==P&&+P[10]===P[10]&&P[0]),$){for(e=at(i,A,$),n=[],t=i.length;t--;)n.unshift(i[t][9]);it(e,n)}else e=at(i,S);return e}function it(t,e){var n,i,r=0,s=e.length;for(t.deps=[],t.paths=[];r<s;r++)for(n in t.paths.push(i=e[r]),i)"_jsvto"!==n&&i.hasOwnProperty(n)&&i[n].length&&!i[n].skp&&(t.deps=t.deps.concat(i[n]))}function rt(t,e,n){return[t.slice(0,-1),e.slice(0,-1),n.slice(0,-1)]}function st(_,M,t,I){var E,D,j,P,z=M&&M[0],L={bd:z},T={0:L},U=0,N=0,F=0,B={},O=0,R={},W={},q={},V={0:0},H={0:""},G=0,t=((_="@"===_[0]?_.replace(St,"."):_)+(t?" ":"")).replace(Y.rPrm,function(t,e,n,i,l,r,s,a,o,u,c,d,h,p,m,f,g,v,w,b,y){r=r||"",h=h||"",n=n||e||h,l=(l=i&&!a?i+l:l)||o,(u=u&&!/\)|]/.test(y[b-1]))&&(l=l.slice(1).split(".").join("^")),c=c||v||"";var C,x,A,S,$,k=b;if(!P&&!j){if(s&&Q(_),g&&z){if(o=q[F-1],y.length-1>k-(o||0)){if(o=J.trim(y.slice(o,k+t.length)),C=D||T[F-1].bd,(x=C[C.length-1])&&x.prm){for(;x.sb&&x.sb.prm;)x=x.sb;A=x.sb={path:x.sb,bnd:x.bnd}}else C.push(A={path:C.pop()});x&&x.sb===A&&(H[F]=H[F-1].slice(x._cpPthSt)+H[F],H[F-1]=H[F-1].slice(0,x._cpPthSt)),A._cpPthSt=V[F-1],A._cpKey=o,H[F]+=y.slice(G,b),G=b,A._cpfn=Dt[o]=Dt[o]||new Function("data,view,j","//"+o+"\nvar v;\nreturn ((v="+H[F]+("]"===f?")]":f)+")!=null?v:null);"),H[F-1]+=W[N]&&Z.cache?'view.getCache("'+o.replace(mt,"\\$&")+'"':H[F],A.prm=L.bd,A.bnd=A.bnd||A.path&&0<=A.path.indexOf("^")}H[F]=""}"["===c&&(c="[j._sq("),"["===n&&(n="[j._sq(")}return s=P?(P=!p)?t:h+'"':j?(j=!m)?t:h+'"':(n?(R[++N]=!0,B[N]=0,z&&(q[F++]=k++,L=T[F]={bd:[]},H[F]="",V[F]=1),n):"")+(w?N?"":(U=y.slice(U,k),(E?(E=D=!1,"\b"):"\b,")+U+(U=k+t.length,z&&M.push(L.bd=[]),"\b")):a?(F&&Q(_),z&&M.pop(),E="_"+l,U=k+t.length,z&&((z=L.bd=M[E]=[]).skp=!i),l+":"):l?l.split("^").join(".").replace(Y.rPath,function(t,e,n,i,r,s,a,o){if(S="."===n,n&&(l=l.slice(e.length),/^\.?constructor$/.test(o||l)&&Q(t),S||(t=(u?(I?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(i?'view.ctxPrm("'+i+'")':r?"view":"data")+(u?")===undefined"+(I?"":")")+'?"":view._getOb(ob,"':"")+(o?(s?"."+s:i||r?"":"."+n)+(a||""):(o=i?"":r?s||"":n,"")),t=e+("view.data"===(t+=o?"."+o:"").slice(0,9)?t.slice(5):t)+(u?(I?'"':'",ltOb')+(c?",1)":")"):"")),z)){if(C="_linkTo"===E?D=M._jsvto=M._jsvto||[]:L.bd,x=S&&C[C.length-1]){if(x._cpfn){for(;x.sb;)x=x.sb;x.prm&&(x.bnd&&(l="^"+l.slice(1)),x.sb=l,x.bnd=x.bnd||"^"===l[0])}}else C.push(l);c&&!S&&(q[F]=k,V[F]=H[F].length)}return t})+(c||r):r||(f?"]"===f?")]":")":d?(W[N]||Q(_),","):e?"":(P=p,j=m,'"'))),P||j||f&&(W[N]=!1,N--),z&&(P||j||(f&&(R[N+1]&&(L=T[--F],R[N+1]=!1),O=B[N+1]),c&&(B[N+1]=H[F].length+(n?1:0),l||f)&&(L=T[++F]={bd:[]},R[N+1]=!0)),H[F]=(H[F]||"")+y.slice(G,b),G=b+t.length,P||j||(($=n&&R[N+1])&&(H[F-1]+=n,V[F-1]++),"("===c&&S&&!A&&(H[F]=H[F-1].slice(O)+H[F],H[F-1]=H[F-1].slice(0,O))),H[F]+=$?s.slice(1):s),P||j||!c||(N++,l&&"("===c&&(W[N]=!0)),P||j||!v||(z&&(H[F]+=c),s+=c),s});return z&&(t=H[0]),!N&&t||Q(_)}function at(t,e,n){var i,r,s,a,o,l,u,c,d,h,p,m,f,g,v,w,b,y,C,x,A,S,$,k,_,M,I,E,D,j=0,P=Z.useViews||e.useViews||e.tags||e.templates||e.helpers||e.converters,z="",L={},T=t.length;for(""+e===e?(v=n?'data-link="'+e.replace(ht," ").slice(1,-1)+'"':e,e=0):(v=e.tmplName||"unnamed",e.allowCode&&(L.allowCode=!0),e.debug&&(L.debug=!0),d=e.bnds,g=e.tmpls),i=0;i<T;i++)if(""+(r=t[i])===r)z+='+"'+r+'"';else if("*"===(s=r[0]))z+=";\n"+r[1]+"\nret=ret";else{if(a=r[1],b=!n&&r[2],E=r[3],D=p=r[4],E="\n\tparams:{args:["+E[0]+"],\n\tprops:{"+E[1]+"}"+(E[2]?",\n\tctx:{"+E[2]+"}":"")+"},\n\targs:["+D[0]+"],\n\tprops:{"+D[1]+"}"+(D[2]?",\n\tctx:{"+D[2]+"}":""),D=r[6],_=r[7],I=r[8]?(M="\nvar ob,ltOb={},ctxs=",";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(M="\nreturn ",""),k=r[10]&&r[10].replace(pt,"$1"),(x="else"===s)?h&&h.push(r[9]):($=r[5]||!1!==N.debugMode&&"undefined",d&&(h=r[9])&&(h=[h],j=d.push(1))),P=P||p[1]||p[2]||h||/view.(?!index)/.test(p[0]),(A=":"===s)?a&&(s=a===V?">":a+s):(b&&((k=tt(k,L)).tmplName=v+"/"+s,k.useViews=k.useViews||P,at(b,k),P=k.useViews,g.push(k)),x||(w=s,P=P||s&&(!U[s]||!U[s].flow),C=z,z=""),y=(y=t[i+1])&&"else"===y[0]),k=$?";\ntry{\nret+=":"\n+",m=x="",A&&(h||D||a&&a!==V||_)){if((S=new Function("data,view,j","// "+v+" "+ ++j+" "+s+M+"{"+E+"};"+I))._er=$,S._tag=s,S._bd=!!h,S._lr=_,n)return S;it(S,h),c=!0,x=(f='c("'+a+'",view,')+j+",",m=")"}if(z+=A?(n?($?"try{\n":"")+"return ":k)+(c?(P=u=!(c=void 0),f+(S?(d[j-1]=S,j):"{"+E+"}")+")"):">"===s?(l=!0,"h("+p[0]+")"):"((v="+p[0]+")!=null?v:"+(n?"null)":'"")')):(o=!0,"\n{view:view,content:false,tmpl:"+(b?g.length:"false")+","+E+"},"),w&&!y){if(z="["+z.slice(0,-1)+"]",f='t("'+w+'",view,this,',n||h){if((z=new Function("data,view,j"," // "+v+" "+j+" "+w+M+z+I))._er=$,z._tag=w,h&&it(d[j-1]=z,h),z._lr=_,n)return z;x=f+j+",undefined,",m=")"}z=C+k+f+(h&&j||z)+")",w=h=0}$&&!y&&(P=!0,z+=";\n}catch(e){ret"+(n?"urn ":"+=")+x+"j._err(e,view,"+$+")"+m+";}"+(n?"":"\nret=ret"))}z="// "+v+(L.debug?"\ndebugger;":"")+"\nvar v"+(o?",t=j._tag":"")+(u?",c=j._cnvt":"")+(l?",h=j._html":"")+(n?(r[8]?", ob":"")+";\n":',ret=""')+z+(n?"\n":";\nreturn ret;");try{z=new Function("data,view,j",z)}catch(t){Q("Compiled template code:\n\n"+z+'\n: "'+(t.message||t)+'"')}return e&&(e.fn=z,e.useViews=!!P),z}function O(t,e){return t&&t!==e?e?x(x({},e),t):t:e&&x({},e)}function j(e,t){var n,i,r,s=t.tag,a=t.props,o=t.params.props,l=a.filter,u=a.sort,c=!0===u,d=parseInt(a.step),h=a.reverse?-1:1;if(W(e)){if(c||u&&""+u===u?((n=e.map(function(t,e){return{i:e,v:""+(t=c?t:_(t,u))===t?t.toLowerCase():t}})).sort(function(t,e){return t.v>e.v?h:t.v<e.v?-h:0}),e=n.map(function(t){return e[t.i]})):(u||h<0)&&!s.dataMap&&(e=e.slice()),S(u)&&(e=e.sort(function(){return u.apply(t,arguments)})),(e=h<0&&(!u||S(u))?e.reverse():e).filter&&l&&(e=e.filter(l,t),t.tag.onFilter)&&t.tag.onFilter(t),o.sorted&&(n=u||h<0?e:e.slice(),s.sorted?J.observable(s.sorted).refresh(n):t.map.sorted=n),i=a.start,r=a.end,(o.start&&void 0===i||o.end&&void 0===r)&&(i=r=0),isNaN(i)&&isNaN(r)||(r=void 0===r||r>e.length?e.length:+r,e=e.slice(i=+i||0,r)),1<d){for(i=0,r=e.length,n=[];i<r;i+=d)n.push(e[i]);e=n}o.paged&&s.paged&&$observable(s.paged).refresh(e)}return e}function P(t,e,n){var i=this.jquery&&(this[0]||B("Unknown template")),r=i.getAttribute(It);return et.call(r&&J.data(i)[f]||p(i),t,e,n)}function z(t){return kt[t]||(kt[t]="&#"+t.charCodeAt(0)+";")}function L(t,e){return _t[e]||""}function T(t){return null!=t?wt.test(t)&&(""+t).replace(Ct,z)||t:""}var ot=!1===J;J=J&&J.fn?J:c.jQuery;var lt,r,R,C,S,W,p,q,ut,U,Y,N,Z,s,a,i,o,d,h,ct,m,n="v1.0.11",dt="_ocp",ht=/[ \t]*(\r\n|\n|\r)/g,pt=/\\(['"\\])/g,mt=/['"\\]/g,ft=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,gt=/^if\s/,vt=/<(\w+)[>\s]/,wt=/[\x00`><\"'&=]/,bt=/^on[A-Z]|^convert(Back)?$/,yt=/^\#\d+_`[\s\S]*\/\d+_`$/,Ct=/[\x00`><"'&=]/g,xt=/[&<>]/g,At=/&(amp|gt|lt);/g,St=/\[['"]?|['"]?\]/g,$t=0,kt={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},_t={amp:"&",gt:">",lt:"<"},V="html",Mt="object",It="data-jsv-tmpl",f="jsvTmpl",Et="For #index in nested block use #getIndex().",Dt={},jt={},g=c.jsrender,Pt=g&&J&&!J.render,zt={template:{compile:function n(i,t,r,s){function e(t){var e;if(""+t===t||0<t.nodeType&&(a=t)){if(!a)if(/^\.?\/[^\\:*?"<>]*$/.test(t))(e=p[i=i||t])?t=e:a=document.getElementById(t);else if("#"===t.charAt(0))a=document.getElementById(t.slice(1));else if(J.fn&&!Y.rTmpl.test(t))try{a=J(t,document)[0]}catch(t){}a&&("SCRIPT"!==a.tagName&&B(t+": Use script block, not "+a.tagName),s?t=a.innerHTML:((e=a.getAttribute(It))&&(e!==f?(t=p[e],delete p[e]):J.fn&&(t=J.data(a)[f])),(t=e&&t?t:n(i=i||(J.fn?f:t),a.innerHTML,r,s)).tmplName=i=i||e,i!==f&&(p[i]=t),a.setAttribute(It,i),J.fn&&J.data(a,f,t))),a=void 0}else t.fn||(t=void 0);return t}var a,o,l,u,c,d=t=t||"";if(Y._html=q.html,0===s&&(s=void 0,d=e(d)),(s=s||(t.markup?t.bnds?x({},t):t:{})).tmplName=s.tmplName||i||"unnamed",r&&(s._parentTmpl=r),void 0!==(d=!d&&t.markup&&(d=e(t.markup))&&d.fn?d.markup:d)){if(d.render||t.render?d.tmpls&&(o=d):(t=tt(d,s),D(d.replace(mt,"\\$&"),t)),!o){var h=o=x(function(){return o.render.apply(o,arguments)},t);for(l in zt)u=l+"s",h[u]&&(c=h[u],h[u]={},v[u](c,h))}return o}}},tag:{compile:function(t,e,n){function i(){this._={unlinked:!0},this.inline=!0,this.tagName=t}var r,s,a,o=new Y._tg;if(S(e)?e={depends:e.depends,render:e}:""+e===e&&(e={template:e}),s=e.baseTag)for(a in e.flow=!!e.flow,(s=""+s===s?n&&n.tags[s]||U[s]:s)||B('baseTag: "'+e.baseTag+'" not found'),o=x(o,s),e)o[a]=l(s[a],e[a]);else o=x(o,e);return void 0!==(r=o.template)&&(o.template=""+r===r?p[r]||p(r):r),(i.prototype=o).constructor=o._ctr=i,n&&(o._parentTmpl=n),o}},viewModel:{compile:function(l,t){function e(t){n.apply(this,t)}function f(){return new e(arguments)}function g(t,e){for(var n,i,r,s,a,o,l=0;l<m;l++)n=void 0,(i=h[l])+""!==i&&(i=(n=i).getter,s=n.parentRef),void 0===(r=t[i])&&n&&void 0!==(a=n.defaultVal)&&(o=t,r=S(a=a)?a.call(o):a),e(r,n&&d[n.type],i,s)}function u(t,e,n){t=t+""===t?JSON.parse(t):t;var i,r,s,a,o,l,u,c,d,h,p=0,m=this;if(W(m)){for(u={},d=[],r=t.length,s=m.length;p<r;p++){for(c=t[p],l=!1,i=0;i<s&&!l;i++)u[i]||(o=m[i],v&&(u[i]=l=v+""===v?c[v]&&(b[v]?o[v]():o[v])===c[v]:v(o,c)));l?(o.merge(c),d.push(o)):(d.push(h=f.map(c)),n&&y(h,n,e))}w?w(m).refresh(d,!0):m.splice.apply(m,[0,m.length].concat(d))}else for(a in g(t,function(t,e,n,i){e?m[n]().merge(t,m,i):m[n]()!==t&&m[n](t)}),t)a===C||b[a]||(m[a]=t[a])}function c(){function t(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n].unmap());return e}var e,n,i,r,s=0,a=this;if(W(a))return t(a);for(e={};s<m;s++)i=void 0,r=a[n=(n=h[s])+""!==n?(i=n).getter:n](),e[n]=i&&r&&d[i.type]?W(r)?t(r):r.unmap():r;for(n in a)!a.hasOwnProperty(n)||"_"===n.charAt(0)&&b[n.slice(1)]||n===C||S(a[n])||(e[n]=a[n]);return e}var i,n,r,d=this,h=t.getters,s=t.extend,v=t.id,a=J.extend({_is:l||"unnamed",unmap:c,merge:u},s),o="",p="",m=h?h.length:0,w=J.observable,b={};for(e.prototype=a,i=0;i<m;i++)!function(e){e=e.getter||e,b[e]=i+1;var n="_"+e;o+=(o?",":"")+e,p+="this."+n+" = "+e+";\n",a[e]=a[e]||function(t){return arguments.length?void(w?w(this).setProperty(e,t):this[n]=t):this[n]},w&&(a[e].set=a[e].set||function(t){this[n]=t})}(h[i]);return p=new Function(o,p),((n=function(){p.apply(this,arguments),(r=arguments[m+1])&&y(this,arguments[m],r)}).prototype=a).constructor=n,f.map=function(t){var e,n,i,r,s=0,a=t=t+""===t?JSON.parse(t):t,o=[];if(W(t)){for(e=(t=t||[]).length;s<e;s++)o.push(this.map(t[s]));return o._is=l,o.unmap=c,o.merge=u,o}if(t){for(g(t,function(t,e){e&&(t=e.map(t)),o.push(t)}),a=this.apply(this,o),s=m;s--;)if(i=o[s],(r=h[s].parentRef)&&i&&i.unmap)if(W(i))for(e=i.length;e--;)y(i[e],r,a);else y(i,r,a);for(n in t)n===C||b[n]||(a[n]=t[n])}return a},f.getters=h,f.extend=s,f.id=v,f}},helper:{},converter:{}},v={jsviews:n,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:A,Err:e,tmplFn:D,parse:st,extend:x,extendCtx:O,syntaxErr:Q,onStore:{template:function(t,e){null===e?delete jt[t]:t&&(jt[t]=e)}},addSetting:I,settings:{allowCode:!1},advSet:u,_thp:F,_gm:l,_tg:function(){},_cnvt:function(t,e,n,i){var r,s,a,o,l,u="number"==typeof n&&e.tmpl.bnds[n-1];if(void 0!==(i=void 0===i&&u&&u._lr?"":i)?n=i={props:{},args:[i]}:u&&(n=u(e.data,e,Y)),u=u._bd&&u,t||u){if(r=(s=e._lc)&&s.tag,n.view=e,!r){if(r=x(new Y._tg,{_:{bnd:u,unlinked:!0,lt:n.lt},inline:!s,tagName:":",convert:t,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),1<(o=n.args.length))for(l=r.bindTo=[];o--;)l.unshift(o);s&&((s.tag=r).linkCtx=s),n.ctx=O(n.ctx,(s?s.view:e).ctx),F(r,n)}r._er=i&&a,r.ctx=n.ctx||r.ctx||{},n.ctx=void 0,a=r.cvtArgs()[0],r._er=i&&a}else a=n.args[0];return null!=(a=u&&e._.onRender?e._.onRender(a,e,r):a)?a:""},_tag:function(t,e,n,i,r,s){function T(t){var e=a[t];if(void 0!==e)for(e=W(e)?e:[e],h=e.length;h--;)k=e[h],isNaN(parseInt(k))||(e[h]=parseInt(k));return e||[0]}var a,o,l,u,c,d,h,p,m,f,g,v,w,b,y,C,x,U,A,S,$,k,_,M,I,E,D=0,j="",P=(e=e||R)._lc||!1,z=e.ctx,N=n||e.tmpl,L="number"==typeof i&&e.tmpl.bnds[i-1];for(("tag"===t._is?(t=(a=t).tagName,i=a.tagCtxs,a):o=e.getRsc("tags",t)||B("Unknown tag: {{"+t+"}} ")).template,void 0!==(s=void 0===s&&L&&(L._lr=o.lateRender&&!1!==L._lr||L._lr)?"":s)?(j+=s,i=s=[{props:{},args:[],params:{props:{}}}]):L&&(i=L(e.data,e,Y)),d=i.length;D<d;D++)y=(f=i[D]).tmpl,(!P||!P.tag||D&&!P.tag.inline||a._er||y&&+y===y)&&(y&&N.tmpls&&(f.tmpl=f.content=N.tmpls[y-1]),f.index=D,f.ctxPrm=H,f.render=et,f.cvtArgs=G,f.bndArgs=X,f.view=e,f.ctx=O(O(f.ctx,o&&o.ctx),z)),(n=f.props.tmpl)&&(f.tmpl=e._getTmpl(n),f.content=f.content||f.tmpl),a?P&&P.fn._lr&&(C=!!a.init):(C=!!(a=new o._ctr).init,a.parent=c=z&&z.tag,a.tagCtxs=i,P&&(a.inline=!1,P.tag=a),a.linkCtx=P,(a._.bnd=L||P.fn)?(a._.ths=f.params.props.this,a._.lt=i.lt,a._.arrVws={}):a.dataBoundOnly&&B(t+" must be data-bound:\n{^{"+t+"}}")),S=a.dataMap,f.tag=a,S&&i&&(f.map=i[D].map),a.flow||(y=f.ctx=f.ctx||{},l=a.parents=y.parentTags=z&&O(y.parentTags,z.parentTags)||{},c&&(l[c.tagName]=c),l[a.tagName]=y.tag=a,y.tagCtx=f);if(!(a._er=s)){for(F(a,i[0]),a.rendering={rndr:a.rendering},D=0;D<d;D++){if(A=(f=a.tagCtx=i[D]).props,a.ctx=f.ctx,!D){if(C&&(a.init(f,P,a.ctx),C=void 0),f.args.length||!1===f.argDefault||!1===a.argDefault||(f.args=x=[f.view.data],f.params.args=["#data"]),v=T("bindTo"),void 0!==a.bindTo&&(a.bindTo=v),void 0!==a.bindFrom?a.bindFrom=T("bindFrom"):a.bindTo&&(a.bindFrom=a.bindTo=v),w=a.bindFrom||v,M=v.length,_=w.length,a._.bnd&&(I=a.linkedElement)&&(a.linkedElement=I=W(I)?I:[I],M!==I.length)&&B("linkedElement not same length as bindTo"),(I=a.linkedCtxParam)&&(a.linkedCtxParam=I=W(I)?I:[I],_!==I.length)&&B("linkedCtxParam not same length as bindFrom/bindTo"),w)for(a._.fromIndex={},a._.toIndex={},p=_;p--;)for(k=w[p],h=M;h--;)k===v[h]&&(a._.fromIndex[h]=p,a._.toIndex[p]=h);P&&(P.attr=a.attr=P.attr||a.attr||P._dfAt),u=a.attr,a._.noVws=u&&u!==V}if(x=a.cvtArgs(D),a.linkedCtxParam)for(U=a.cvtArgs(D,1),h=_,E=a.constructor.prototype.ctx;h--;)(g=a.linkedCtxParam[h])&&(k=w[h],b=U[h],f.ctx[g]=Y._cp(E&&void 0===b?E[g]:b,void 0!==b&&K(f.params,k),f.view,a._.bnd&&{tag:a,cvt:a.convert,ind:h,tagElse:D}));($=A.dataMap||S)&&(x.length||A.dataMap)&&((A=f.map)&&A.src===x[0]&&!r||(A&&A.src&&A.unmap(),$.map(x[0],f,A,!a._.bnd),A=f.map),x=[A.tgt]),m=void 0,a.render&&(m=a.render.apply(a,x),e.linked)&&m&&!yt.test(m)&&((n={links:[]}).render=n.fn=function(){return m},m=nt(n,e.data,void 0,!0,e,void 0,void 0,a)),x.length||(x=[e]),void 0===m&&($=x[0],a.contentCtx&&($=!0===a.contentCtx?e:a.contentCtx($)),m=f.render($,!0)||(r?void 0:"")),j=j?j+(m||""):void 0!==m?""+m:void 0}a.rendering=a.rendering.rndr}return a.tagCtx=i[0],a.ctx=a.tagCtx.ctx,a._.noVws&&a.inline&&(j="text"===u?q.html(j):""),L&&e._.onRender?e._.onRender(j,e,a):j},_er:B,_err:function(t,e,n){var i=void 0!==n?S(n)?n.call(e.data,t,e):n||"":"{Error: "+(t.message||t)+"}";return N.onError&&void 0!==(n=N.onError.call(e.data,t,n&&i,e))&&(i=n),e&&!e._lc?q.html(i):i},_cp:t,_sq:function(t){return"constructor"===t&&Q(""),t}},settings:{delimiters:b,advanced:function(t){return t?(x(Z,t),Y.advSet(),s):Z}},map:E};if((e.prototype=new Error).constructor=e,$.depends=function(){return[this.get("item"),"index"]},k.depends="index",A.prototype={get:function(t,e){e||!0===t||(e=t,t=void 0);var n,i,r,s,a=this,o="root"===e;if(t){if(!(s=e&&a.type===e&&a))if(n=a.views,a._.useKey){for(i in n)if(s=e?n[i].get(t,e):n[i])break}else for(i=0,r=n.length;!s&&i<r;i++)s=e?n[i].get(t,e):n[i]}else if(o)s=a.root;else if(e)for(;a&&!s;)s=a.type===e?a:void 0,a=a.parent;else s=a.parent;return s||void 0},getIndex:k,ctxPrm:H,getRsc:function(t,e){var n,i,r=this;if(""+e===e){for(;void 0===n&&r;)n=(i=r.tmpl&&r.tmpl[t])&&i[e],r=r.parent;return n||v[t][e]}},_getTmpl:function(t){return t&&(t.fn?t:this.getRsc("templates",t)||p(t))},_getOb:_,getCache:function(t){return N._cchCt>this.cache._ct&&(this.cache={_ct:N._cchCt}),void 0!==this.cache[t]?this.cache[t]:this.cache[t]=Dt[t](this.data,this,Y)},_is:"view"},Y=v.sub,s=v.settings,!(g||J&&J.render)){for(lt in zt)M(lt,zt[lt]);if(q=v.converters,ut=v.helpers,U=v.tags,Y._tg.prototype={baseApply:function(t){return this.base.apply(this,t)},cvtArgs:G,bndArgs:X,ctxPrm:H},R=Y.topView=new A,J){if(J.fn.render=P,C=J.expando,J.observable){if(n!==(n=J.views.jsviews))throw"jquery.observable.js requires jsrender.js "+n;x(Y,J.views.sub),v.map=J.views.map}}else J={},ot&&(c.jsrender=J),J.renderFile=J.__express=J.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},J.isFunction=function(t){return"function"==typeof t},J.isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},Y._jq=function(t){t!==J&&(x(t,J),(J=t).fn.render=P,delete J.jsrender,C=J.expando)},J.jsrender=n;for(ct in(N=Y.settings).allowCode=!1,S=J.isFunction,J.render=jt,J.views=v,J.templates=p=v.templates,N)I(ct);(s.debugMode=function(t){return void 0===t?N.debugMode:(N._clFns&&N._clFns(),N.debugMode=t,N.onError=t+""===t?function(){return t}:S(t)?t:void 0,s)})(!1),Z=N.advanced={cache:!0,useViews:!1,_jsv:!1},U({if:{render:function(t){var e=this.tagCtx;return this.rendering.done||!t&&(e.args.length||!e.index)?"":(this.rendering.done=!0,void(this.selected=e.index))},contentCtx:!0,flow:!0},for:{sortDataMap:E(j),init:function(t,e){this.setDataMap(this.tagCtxs)},render:function(t){var e,n,i,r,s=this.tagCtx,a=!1===s.argDefault,o=s.props,l=a||s.args.length,u="",c=0;if(!this.rendering.done){if(e=l?t:s.view.data,a)for(a=o.reverse?"unshift":"push",i=+o.end,r=+o.step||1,e=[],n=+o.start||0;0<(i-n)*r;n+=r)e[a](n);void 0!==e&&(t=W(e),u+=s.render(e,!l||o.noIteration),c+=t?e.length:1),(this.rendering.done=c)&&(this.selected=s.index)}return u},setDataMap:function(t){for(var e,n,i,r=t.length;r--;)n=(e=t[r]).props,i=e.params.props,e.argDefault=void 0===n.end||0<e.args.length,n.dataMap=!1!==e.argDefault&&W(e.args[0])&&(i.sort||i.start||i.end||i.step||i.filter||i.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:E(function(t,e){var n,i,r=e.map,s=r&&r.propsArr;if(!s){if(s=[],typeof t===Mt||S(t))for(n in t)i=t[n],n===C||!t.hasOwnProperty(n)||e.props.noFunctions&&J.isFunction(i)||s.push({key:n,prop:i});r&&(r.propsArr=r.options&&s)}return j(s,e)}),init:u,flow:!0},include:{flow:!0},"*":{render:t,flow:!0},":*":{render:t,flow:!0},dbg:ut.dbg=q.dbg=function(t){try{throw console.log("JsRender dbg breakpoint: "+t),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):t}}),q({html:T,attr:T,encode:function(t){return""+t===t?t.replace(xt,z):t},unencode:function(t){return""+t===t?t.replace(At,L):t},url:function(t){return null!=t?encodeURI(""+t):null===t?t:""}})}return N=Y.settings,W=(J||g).isArray,s.delimiters("{{","}}","^"),Pt&&g.views.sub._jq(J),J||g},window),function(l){"use strict";function t(){this.minw=40,this.minh=40,this.maxw=0,this.maxh=0,this.core=null}function e(){this.core=null}function i(){this.core=null}function r(){this.stepx=1,this.stepy=1,this.core=null}function s(){this.ratio=0,this.core=null}function a(){this.core=null}function o(t,e){this.color=e||"black",this.opacity=t||.5,this.core=null,this.shades={}}function u(t){this.selection=t,this.core=t.core}function c(t,e,n){var i=this,e=(i.x=t.pageX,i.y=t.pageY,i.selection=e,i.eventTarget=e.core.opt.dragEventTarget,i.orig=e.get(),e.callFilterFunction("refresh"),e.core.container.position());i.elx=e.left,i.ely=e.top,i.offsetx=0,i.offsety=0,i.ord=n,i.opposite=i.getOppositeCornerOffset(),i.initEvents(t)}function d(t){this.core=t}function h(t,e,n){this.src=t,e=e||new Image,this.element=e,this.callback=n,this.load()}function p(t){this.core=t,this.init()}function m(t){this.core=t,this.init()}function f(){}function g(t,e){l.extend(this,g.defaults,e||{}),this.manager=t,this.core=t.core}function v(t){this.core=t,this.ui=t.ui,this.init()}l.extend(t.prototype,{tag:"backoff",priority:22,filter:function(t){var e=this.bound;return t.x<e.minx&&(t.x=e.minx,t.x2=t.w+t.x),t.y<e.miny&&(t.y=e.miny,t.y2=t.h+t.y),t.x2>e.maxx&&(t.x2=e.maxx,t.x=t.x2-t.w),t.y2>e.maxy&&(t.y2=e.maxy,t.y=t.y2-t.h),t},refresh:function(t){this.elw=t.core.container.width(),this.elh=t.core.container.height(),this.bound={minx:0+t.edge.w,miny:0+t.edge.n,maxx:this.elw+t.edge.e,maxy:this.elh+t.edge.s}}}),l.extend(e.prototype,{tag:"constrain",priority:5,filter:function(t,e){return"move"==e?(t.x<this.minx&&(t.x=this.minx,t.x2=t.w+t.x),t.y<this.miny&&(t.y=this.miny,t.y2=t.h+t.y),t.x2>this.maxx&&(t.x2=this.maxx,t.x=t.x2-t.w),t.y2>this.maxy&&(t.y2=this.maxy,t.y=t.y2-t.h)):(t.x<this.minx&&(t.x=this.minx),t.y<this.miny&&(t.y=this.miny),t.x2>this.maxx&&(t.x2=this.maxx),t.y2>this.maxy&&(t.y2=this.maxy)),t.w=t.x2-t.x,t.h=t.y2-t.y,t},refresh:function(t){this.elw=t.core.container.width(),this.elh=t.core.container.height(),this.minx=0+t.edge.w,this.miny=0+t.edge.n,this.maxx=this.elw+t.edge.e,this.maxy=this.elh+t.edge.s}}),l.extend(i.prototype,{tag:"extent",priority:12,offsetFromCorner:function(t,e,n){var i=e[0],r=e[1];switch(t){case"bl":return[n.x2-i,n.y,i,r];case"tl":return[n.x2-i,n.y2-r,i,r];case"br":return[n.x,n.y,i,r];case"tr":return[n.x,n.y2-r,i,r]}},getQuadrant:function(t){var e=t.opposite[0]-t.offsetx,t=t.opposite[1]-t.offsety;return e<0&&t<0?"br":0<=e&&0<=t?"tl":e<0&&0<=t?"tr":"bl"},filter:function(t,e,n){var i,r;return"move"==e||(e=t.w,i=t.h,n=n.state,r=this.limits,n=n?this.getQuadrant(n):"br",r.minw&&e<r.minw&&(e=r.minw),r.minh&&i<r.minh&&(i=r.minh),r.maxw&&e>r.maxw&&(e=r.maxw),r.maxh&&i>r.maxh&&(i=r.maxh),e==t.w&&i==t.h)?t:w.wrapFromXywh(this.offsetFromCorner(n,[e,i],t))},refresh:function(t){this.elw=t.core.container.width(),this.elh=t.core.container.height(),this.limits={minw:t.minSize[0],minh:t.minSize[1],maxw:t.maxSize[0],maxh:t.maxSize[1]}}}),l.extend(r.prototype,{tag:"grid",priority:19,filter:function(t){t={x:Math.round(t.x/this.stepx)*this.stepx,y:Math.round(t.y/this.stepy)*this.stepy,x2:Math.round(t.x2/this.stepx)*this.stepx,y2:Math.round(t.y2/this.stepy)*this.stepy};return t.w=t.x2-t.x,t.h=t.y2-t.y,t}}),l.extend(s.prototype,{tag:"ratio",priority:15,offsetFromCorner:function(t,e,n){var i=e[0],r=e[1];switch(t){case"bl":return[n.x2-i,n.y,i,r];case"tl":return[n.x2-i,n.y2-r,i,r];case"br":return[n.x,n.y,i,r];case"tr":return[n.x,n.y2-r,i,r]}},getBoundRatio:function(t,e){var n=w.getLargestBox(this.ratio,t.w,t.h);return w.wrapFromXywh(this.offsetFromCorner(e,n,t))},getQuadrant:function(t){var e=t.opposite[0]-t.offsetx,t=t.opposite[1]-t.offsety;return e<0&&t<0?"br":0<=e&&0<=t?"tl":e<0&&0<=t?"tr":"bl"},filter:function(t,e,n){if(!this.ratio)return t;t.w,t.h;var n=n.state,i=n?this.getQuadrant(n):"br";if("move"==(e=e||"se"))return t;switch(e){case"n":t.x2=this.elw,t.w=t.x2-t.x,i="tr";break;case"s":t.x2=this.elw,t.w=t.x2-t.x,i="br";break;case"e":t.y2=this.elh,t.h=t.y2-t.y,i="br";break;case"w":t.y2=this.elh,t.h=t.y2-t.y,i="bl"}return this.getBoundRatio(t,i)},refresh:function(t){this.ratio=t.aspectRatio,this.elw=t.core.container.width(),this.elh=t.core.container.height()}}),l.extend(a.prototype,{tag:"round",priority:90,filter:function(t){t={x:Math.round(t.x),y:Math.round(t.y),x2:Math.round(t.x2),y2:Math.round(t.y2)};return t.w=t.x2-t.x,t.h=t.y2-t.y,t}}),l.extend(o.prototype,{tag:"shader",fade:!0,fadeEasing:"swing",fadeSpeed:320,priority:95,init:function(){var t=this;t.attached||(t.visible=!1,t.container=l("<div />").addClass(t.core.opt.css_shades).prependTo(this.core.container).hide(),t.elh=this.core.container.height(),t.elw=this.core.container.width(),t.shades={top:t.createShade(),right:t.createShade(),left:t.createShade(),bottom:t.createShade()},t.attached=!0)},destroy:function(){this.container.remove()},setColor:function(n,i){var r,s=this;return n!=s.color&&(this.color=n,r=w.supportsColorFade(),l.each(s.shades,function(t,e){s.fade&&!i&&r?e.animate({backgroundColor:n},{queue:!1,duration:s.fadeSpeed,easing:s.fadeEasing}):e.css("backgroundColor",n)})),s},setOpacity:function(n,i){var r=this;return n==r.opacity||(r.opacity=n,l.each(r.shades,function(t,e){!r.fade||i?e.css({opacity:n}):e.animate({opacity:n},{queue:!1,duration:r.fadeSpeed,easing:r.fadeEasing})})),r},createShade:function(){return l("<div />").css({position:"absolute",backgroundColor:this.color,opacity:this.opacity}).appendTo(this.container)},refresh:function(t){var e=this.core,n=this.shades;this.setColor(t.bgColor||this.core.opt.bgColor),this.setOpacity(t.bgOpacity||this.core.opt.bgOpacity),this.elh=e.container.height(),this.elw=e.container.width(),n.right.css("height",this.elh+"px"),n.left.css("height",this.elh+"px")},filter:function(t,e,n){var i;return n.active&&((i=(n=this).shades).top.css({left:Math.round(t.x)+"px",width:Math.round(t.w)+"px",height:Math.round(t.y)+"px"}),i.bottom.css({top:Math.round(t.y2)+"px",left:Math.round(t.x)+"px",width:Math.round(t.w)+"px",height:n.elh-Math.round(t.y2)+"px"}),i.right.css({left:Math.round(t.x2)+"px",width:n.elw-Math.round(t.x2)+"px"}),i.left.css({width:Math.round(t.x)+"px"}),n.visible||(n.container.show(),n.visible=!0)),t}}),l.extend(u.prototype,{getElement:function(){var t=this.selection.get();return l("<div />").css({position:"absolute",top:t.y+"px",left:t.x+"px",width:t.w+"px",height:t.h+"px"})},animate:function(t,e,n,i,r){var s=this;s.selection.allowResize(!1),s.getElement().animate({top:e+"px",left:t+"px",width:n+"px",height:i+"px"},{easing:s.core.opt.animEasing,duration:s.core.opt.animDuration,complete:function(){s.selection.allowResize(!0),r&&r.call(this)},progress:function(t){for(var e={},n=t.tweens,i=0;i<n.length;i++)e[n[i].prop]=n[i].now;t={x:parseInt(e.left),y:parseInt(e.top),w:parseInt(e.width),h:parseInt(e.height)};t.x2=t.x+t.w,t.y2=t.y+t.h,s.selection.updateRaw(t,"se")}})}}),l.extend(c.prototype,{getOppositeCornerOffset:function(){var t=this.orig,e=this.x-this.elx-t.x,n=this.y-this.ely-t.y;switch(this.ord){case"nw":case"w":return[t.w-e,t.h-n];case"sw":return[t.w-e,-n];case"se":case"s":case"e":return[-e,-n];case"ne":case"n":return[-e,t.h-n]}return[null,null]},initEvents:function(){l(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())},dragEvent:function(t){this.offsetx=t.pageX-this.x,this.offsety=t.pageY-this.y,this.selection.updateRaw(this.getBox(),this.ord)},endDragEvent:function(){var t=this.selection;t.element.trigger("cropend",[t,t.core.unscale(t.get())])},createStopHandler:function(){var e=this;return function(t){return l(e.eventTarget).off(".jcrop"),e.endDragEvent(t),!1}},createDragHandler:function(){var e=this;return function(t){return e.dragEvent(t),!1}},update:function(t,e){this.offsetx=t-this.x,this.offsety=e-this.y},resultWrap:function(t){t={x:Math.min(t[0],t[2]),y:Math.min(t[1],t[3]),x2:Math.max(t[0],t[2]),y2:Math.max(t[1],t[3])};return t.w=t.x2-t.x,t.h=t.y2-t.y,t},getBox:function(){var t=this,e=t.orig,n={x2:e.x+e.w,y2:e.y+e.h};switch(t.ord){case"n":return t.resultWrap([e.x,t.offsety+e.y,n.x2,n.y2]);case"s":return t.resultWrap([e.x,e.y,n.x2,t.offsety+n.y2]);case"e":return t.resultWrap([e.x,e.y,t.offsetx+n.x2,n.y2]);case"w":return t.resultWrap([e.x+t.offsetx,e.y,n.x2,n.y2]);case"sw":return t.resultWrap([t.offsetx+e.x,e.y,n.x2,t.offsety+n.y2]);case"se":return t.resultWrap([e.x,e.y,t.offsetx+n.x2,t.offsety+n.y2]);case"ne":return t.resultWrap([e.x,t.offsety+e.y,t.offsetx+n.x2,n.y2]);case"nw":return t.resultWrap([t.offsetx+e.x,t.offsety+e.y,n.x2,n.y2]);case"move":return n.nx=e.x+t.offsetx,n.ny=e.y+t.offsety,t.resultWrap([n.nx,n.ny,n.nx+e.w,n.ny+e.h])}}}),l.extend(d,{prototype:{on:function(t,e){l(this).on(t,e)},off:function(t){l(this).off(t)},trigger:function(t){l(this).trigger(t)}}}),l.extend(h,{attach:function(t,e){return new h(t.src,t,e)},prototype:{getDimensions:function(){var t=this.element;return t.naturalWidth?[t.naturalWidth,t.naturalHeight]:t.width?[t.width,t.height]:null},fireCallback:function(){this.element.onload=null,"function"==typeof this.callback&&this.callback.apply(this,this.getDimensions())},isLoaded:function(){return this.element.complete},load:function(){var t=this;t.element.src=t.src,t.isLoaded()?t.fireCallback():t.element.onload=function(){t.fireCallback()}}}}),l.extend(p,{support:function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||void 0},prototype:{init:function(){var t=l.Jcrop.component.DragState.prototype;t.touch||(this.initEvents(),this.shimDragState(),this.shimStageDrag(),t.touch=!0)},shimDragState:function(){var e=this;l.Jcrop.component.DragState.prototype.initEvents=function(t){"touch"==t.type.substr(0,5)?l(this.eventTarget).on("touchmove.jcrop.jcrop-touch",e.dragWrap(this.createDragHandler())).on("touchend.jcrop.jcrop-touch",this.createStopHandler()):l(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())}},shimStageDrag:function(){this.core.container.addClass("jcrop-touch").on("touchstart.jcrop.jcrop-stage",this.dragWrap(this.core.ui.stage.startDragHandler()))},dragWrap:function(e){return function(t){return t.preventDefault(),t.stopPropagation(),"touch"==t.type.substr(0,5)&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,e(t))}},initEvents:function(){var t=this.core;t.container.on("touchstart.jcrop.jcrop-touch","."+t.opt.css_drag,this.dragWrap(t.startDrag()))}}}),l.extend(m,{defaults:{eventName:"keydown.jcrop",passthru:[9],debug:!1},prototype:{init:function(){l.extend(this,m.defaults),this.enable()},disable:function(){this.core.container.off(this.eventName)},enable:function(){var n=this,i=n.core;i.container.on(n.eventName,function(t){var e=t.shiftKey?16:2;if(0<=l.inArray(t.keyCode,n.passthru))return!0;switch(t.keyCode){case 37:i.nudge(-e,0);break;case 38:i.nudge(0,-e);break;case 39:i.nudge(e,0);break;case 40:i.nudge(0,e);break;case 46:case 8:return i.requestDelete(),!1;default:n.debug&&console.log("keycode: "+t.keyCode)}t.metaKey||t.ctrlKey||t.preventDefault()})}}}),l.extend(f,{defaults:{minSize:[8,8],maxSize:[0,0],aspectRatio:0,edge:{n:0,s:0,e:0,w:0},bgColor:null,bgOpacity:null,last:null,state:null,active:!0,linked:!0,canDelete:!0,canDrag:!0,canResize:!0,canSelect:!0},prototype:{init:function(t){this.core=t,this.startup(),this.linked=this.core.opt.linked,this.attach(),this.setOptions(this.core.opt),t.container.trigger("cropcreate",[this])},attach:function(){},startup:function(){var t=this,e=t.core.opt;l.extend(t,f.defaults),t.filter=t.core.getDefaultFilters(),t.element=l("<div />").addClass(e.css_selection).data({selection:t}),t.frame=l("<button />").addClass(e.css_button).data("ord","move"),t.element.append(t.frame).appendTo(t.core.container),t.core.opt.is_msie&&t.frame.css({opacity:0,backgroundColor:"white"}),t.insertElements(),t.frame.on("focus.jcrop",function(){t.element.trigger("cropfocus",t),t.core.setSelection(t),t.element.addClass("jcrop-focus")}).on("blur.jcrop",function(){t.element.removeClass("jcrop-focus"),t.element.trigger("cropblur",t)})},propagate:["canDelete","canDrag","canResize","canSelect","minSize","maxSize","aspectRatio","edge"],setOptions:function(t){return w.propagate(this.propagate,t,this),this.refresh(),this},refresh:function(){this.allowResize(),this.allowDrag(),this.allowSelect(),this.callFilterFunction("refresh"),this.updateRaw(this.get(),"se")},callFilterFunction:function(t){for(var e=0;e<this.filter.length;e++)this.filter[e][t]&&this.filter[e][t](this);return this},addFilter:function(t){t.core=this.core,this.hasFilter(t)||(this.filter.push(t),this.sortFilters(),t.init&&t.init(),this.refresh())},hasFilter:function(t){for(var e=this.filter,n=0;n<e.length;n++)if(e[n]===t)return!0},sortFilters:function(){this.filter.sort(function(t,e){return t.priority-e.priority})},clearFilters:function(){for(var t=this.filter,e=0;e<t.length;e++)t[e].destroy&&t[e].destroy();this.filter=[]},removeFilter:function(t){for(var e=this.filter,n=[],i=0;i<e.length;i++)e[i].tag&&e[i].tag==t||t===e[i]?e[i].destroy&&e[i].destroy():n.push(e[i]);this.filter=n},runFilters:function(t,e){for(var n=0;n<this.filter.length;n++)t=this.filter[n].filter(t,e,this);return t},endDrag:function(){this.state&&(l(document.body).off(".jcrop"),this.focus(),this.state=null)},startDrag:function(t,e){return this.core,e=e||l(t.target).data("ord"),this.focus(),"move"==e&&this.element.hasClass(this.core.opt.css_nodrag)||(this.state=new w.component.DragState(t,this,e)),!1},allowSelect:function(t){return(t=void 0===t?this.canSelect:t)&&this.canSelect?this.frame.attr("disabled",!1):this.frame.attr("disabled","disabled"),this},allowDrag:function(t){var e=this,n=e.core.opt;return(t=null==t?e.canDrag:t)&&e.canDrag?e.element.removeClass(n.css_nodrag):e.element.addClass(n.css_nodrag),this},allowResize:function(t){var e=this,n=e.core.opt;return(t=null==t?e.canResize:t)&&e.canResize?e.element.removeClass(n.css_noresize):e.element.addClass(n.css_noresize),this},remove:function(){this.element.trigger("cropremove",this),this.element.remove()},toBack:function(){this.active=!1,this.element.removeClass("jcrop-current").removeClass("jcrop-focus").css({zIndex:20})},toFront:function(){this.active=!0,this.element.addClass("jcrop-current").css({zIndex:30}),this.callFilterFunction("refresh"),this.refresh()},redraw:function(t){return this.moveTo(t.x,t.y),this.resize(t.w,t.h),this.last=t,this},update:function(t,e){return this.updateRaw(this.core.scale(t),e)},updateRaw:function(t,e){return t=this.runFilters(t,e),this.redraw(t),this.element.trigger("cropmove",[this,this.core.unscale(t)]),this},animateTo:function(t,e){var n=new w.component.Animator(this),t=this.core.scale(w.wrapFromXywh(t));n.animate(t.x,t.y,t.w,t.h,e)},center:function(t){var e=this.get(),n=this.core,i=n.container.width(),n=n.container.height(),i=[(i-e.w)/2,(n-e.h)/2,e.w,e.h];return this[t?"setSelect":"animateTo"](i)},createElement:function(t,e){return l("<div />").addClass(t+" ord-"+e).data("ord",e)},moveTo:function(t,e){this.element.css({top:e+"px",left:t+"px"})},blur:function(){return this.element.blur(),this},focus:function(){return this.core.setSelection(this),this.frame.focus(),this},resize:function(t,e){this.element.css({width:t+"px",height:e+"px"})},get:function(){var t=this.element,e=t.position(),n=t.width(),t=t.height(),e={x:e.left,y:e.top};return e.x2=e.x+n,e.y2=e.y+t,e.w=n,e.h=t,e},insertElements:function(){for(var t=this,e=(t.core,t.element),n=t.core.opt,i=n.borders,r=n.handles,s=n.dragbars,a=0;a<i.length;a++)e.append(t.createElement(n.css_borders,i[a]));for(a=0;a<s.length;a++)e.append(t.createElement(n.css_dragbars,s[a]));for(a=0;a<r.length;a++)e.append(t.createElement(n.css_handles,r[a]))}}}),g.defaults={offset:[-8,-8],active:!0,minsize:[20,20]},l.extend(g.prototype,{start:function(t){var e=this.core;if(!e.opt.allowSelect)return!1;if(e.opt.multi&&e.opt.multiMax&&e.ui.multi.length>=e.opt.multiMax)return!1;var n=l(t.currentTarget).offset(),i=t.pageX-n.left+this.offset[0],n=t.pageY-n.top+this.offset[1],r=e.ui.multi;if(!e.opt.multi)if(e.opt.multiCleanup){for(var s=0;s<r.length;s++)r[s].remove();e.ui.multi=[]}else e.removeSelection(e.ui.selection);e=e.newSelection().updateRaw(w.wrapFromXywh([i,n,1,1]));return e.element.trigger("cropstart",[e,this.core.unscale(e.get())]),e.startDrag(t,"se")},end:function(t,e){this.drag(t,e);t=this.sel.get();t.w<this.minsize[0]||t.h<this.minsize[1]?this.core.requestDelete():this.sel.focus()}});l.extend(v.prototype,{init:function(){this.setupEvents(),this.dragger=new g(this)},tellConfigUpdate:function(t){for(var e=0,n=this.ui.multi,i=n.length;e<i;e++)n[e].setOptions&&(n[e].linked||this.core.opt.linkCurrent&&n[e]==this.ui.selection)&&n[e].setOptions(t)},startDragHandler:function(){var e=this;return function(t){return!t.button||e.core.opt.is_ie_lt9?e.dragger.start(t):void 0}},removeEvents:function(){this.core.event.off(".jcrop-stage"),this.core.container.off(".jcrop-stage")},shimLegacyHandlers:function(n){var i,r=this.core;l.each(r.opt.legacyHandlers,function(t,e){t in n&&(i=n[t],r.container.off(".jcrop-"+t).on(e+".jcrop.jcrop-"+t,function(t,e,n){i.call(r,n)}),delete n[t])})},setupEvents:function(){var t=this,e=t.core;e.event.on("configupdate.jcrop-stage",function(){t.shimLegacyHandlers(e.opt),t.tellConfigUpdate(e.opt),e.container.trigger("cropconfig",[e,e.opt])}),this.core.container.on("mousedown.jcrop.jcrop-stage",this.startDragHandler())}});var w=function(t,e){var n=navigator.userAgent.toLowerCase();this.opt=l.extend({},w.defaults,e||{}),this.container=l(t),this.opt.is_msie=/msie/.test(n),this.opt.is_ie_lt9=/msie [1-8]\./.test(n),this.container.addClass(this.opt.css_container),this.ui={},this.state=null,this.ui.multi=[],this.ui.selection=null,this.filter={},this.init(),this.setOptions(e),this.applySizeConstraints(),this.container.trigger("cropinit",this),this.opt.is_ie_lt9&&(this.opt.dragEventTarget=document.body)};w.component={Animator:u,DragState:c,EventManager:d,ImageLoader:h,StageManager:v,Selection:f,Keyboard:m,Touch:p},l.extend(w,{defaults:{edge:{n:0,s:0,e:0,w:0},setSelect:null,linked:!0,linkCurrent:!0,canDelete:!0,canSelect:!0,canDrag:!0,canResize:!0,eventManagerComponent:w.component.EventManager,keyboardComponent:w.component.Keyboard,dragstateComponent:w.component.DragState,stagemanagerComponent:w.component.StageManager,animatorComponent:w.component.Animator,selectionComponent:w.component.Selection,allowSelect:!0,multi:!1,multiMax:!1,multiCleanup:!0,animation:!0,animEasing:"swing",animDuration:400,fading:!0,fadeDuration:300,fadeEasing:"swing",bgColor:"black",bgOpacity:.5,applyFilters:["constrain","extent","backoff","ratio","shader","round"],borders:["n","s","e","w"],handles:["n","s","e","w","sw","ne","nw","se"],dragbars:["n","e","w","s"],dragEventTarget:window,xscale:1,yscale:1,boxWidth:null,boxHeight:null,css_nodrag:"jcrop-nodrag",css_drag:"jcrop-drag",css_container:"jcrop-active",css_shades:"jcrop-shades",css_selection:"jcrop-selection",css_borders:"jcrop-border",css_handles:"jcrop-handle jcrop-drag",css_button:"jcrop-box jcrop-drag",css_noresize:"jcrop-noresize",css_dragbars:"jcrop-dragbar jcrop-drag",legacyHandlers:{onChange:"cropmove",onSelect:"cropend"}},filter:{constrain:e,extent:i,grid:r,backoff:t,shader:o,ratio:s,round:a},attach:function(t,e){return new l.Jcrop(t,e)},supportsCanvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},imgCopy:function(t){var e=new Image;return e.src=t.src,e},imageClone:function(t){return w.supportsCanvas()?w.canvasClone(t):w.imgCopy(t)},canvasClone:function(t){var e=document.createElement("canvas"),n=l(e).width(t.width).height(t.height),i=e.getContext("2d");return e.width=t.naturalWidth,e.height=t.naturalHeight,i.drawImage(t,0,0,t.naturalWidth,t.naturalHeight),n},propagate:function(t,e,n){for(var i=0,r=t.length;i<r;i++)e.hasOwnProperty(t[i])&&(n[t[i]]=e[t[i]])},getLargestBox:function(t,e,n){return t<e/n?[n*t,n]:[e,e/t]},supportsColorFade:function(){return l.fx.step.hasOwnProperty("backgroundColor")},wrapFromXywh:function(t){t={x:t[0],y:t[1],w:t[2],h:t[3]};return t.x2=t.x+t.w,t.y2=t.y+t.h,t}}),l.extend(w.prototype,{init:function(){this.event=new this.opt.eventManagerComponent(this),this.ui.keyboard=new this.opt.keyboardComponent(this),this.ui.stage=new this.opt.stagemanagerComponent(this),this.applyFilters(),l.Jcrop.component.Touch.support()&&new l.Jcrop.component.Touch(this),this.initEvents()},applySizeConstraints:function(){var t,e,n,i=this.opt,r=this.opt.imgTarget;r&&(t=r.naturalWidth||r.width,e=r.naturalHeight||r.height,n=i.boxWidth||t,i=i.boxHeight||e,r)&&(n<t||i<e)&&(n=w.getLargestBox(t/e,n,i),l(r).width(n[0]).height(n[1]),this.resizeContainer(n[0],n[1]),this.opt.xscale=t/n[0],this.opt.yscale=e/n[1])},setOptions:function(t){return l.isPlainObject(t)||(t={}),l.extend(this.opt,t),this.opt.setSelect&&(this.ui.multi.length||this.newSelection(),this.ui.multi[0].update(w.wrapFromXywh(this.opt.setSelect)),this.opt.setSelect=null),this.event.trigger("configupdate"),this},destroy:function(){this.opt.imgTarget?(this.container.before(this.opt.imgTarget),this.container.remove(),l(this.opt.imgTarget).removeData("Jcrop")):this.container.remove()},applyFilters:function(){for(var t,e=0,n=this.opt.applyFilters,i=n.length;e<i;e++)(t=l.Jcrop.filter[n[e]]?new l.Jcrop.filter[n[e]]:t).core=this,t.init&&t.init(),this.filter[n[e]]=t},getDefaultFilters:function(){for(var t=[],e=0,n=this.opt.applyFilters,i=n.length;e<i;e++)this.filter.hasOwnProperty(n[e])&&t.push(this.filter[n[e]]);return t.sort(function(t,e){return t.priority-e.priority}),t},setSelection:function(t){for(var e=this.ui.multi,n=[],i=0;i<e.length;i++)e[i]!==t&&n.push(e[i]),e[i].toBack();return n.unshift(t),this.ui.multi=n,(this.ui.selection=t).toFront(),t},getSelection:function(){return this.ui.selection.get()},newSelection:function(t){return(t=t||new this.opt.selectionComponent).init(this),this.setSelection(t),t},hasSelection:function(t){for(var e=0;e<this.ui.multi;e++)if(t===this.ui.multi[e])return!0},removeSelection:function(t){for(var e=[],n=this.ui.multi,i=0;i<n.length;i++)t!==n[i]?e.push(n[i]):n[i].remove();return this.ui.multi=e},addFilter:function(t){for(var e=0,n=this.ui.multi,i=n.length;e<i;e++)n[e].addFilter(t);return this},removeFilter:function(t){for(var e=0,n=this.ui.multi,i=n.length;e<i;e++)n[e].removeFilter(t);return this},blur:function(){return this.ui.selection.blur(),this},focus:function(){return this.ui.selection.focus(),this},initEvents:function(){this.container.on("selectstart",function(){return!1}).on("mousedown","."+this.opt.css_drag,this.startDrag())},maxSelect:function(){this.setSelect([0,0,this.elw,this.elh])},nudge:function(t,e){var n=this.ui.selection,i=n.get();i.x+=t,i.x2+=t,i.y+=e,i.y2+=e,i.x<0?(i.x2=i.w,i.x=0):i.x2>this.elw&&(i.x2=this.elw,i.x=i.x2-i.w),i.y<0?(i.y2=i.h,i.y=0):i.y2>this.elh&&(i.y2=this.elh,i.y=i.y2-i.h),n.element.trigger("cropstart",[n,this.unscale(i)]),n.updateRaw(i,"move"),n.element.trigger("cropend",[n,this.unscale(i)])},refresh:function(){for(var t=0,e=this.ui.multi,n=e.length;t<n;t++)e[t].refresh()},blurAll:function(){for(var t=this.ui.multi,e=0;e<t.length;e++)t[e]!==sel&&n.push(t[e]),t[e].toBack()},scale:function(t){var e=this.opt.xscale,n=this.opt.yscale;return{x:t.x/e,y:t.y/n,x2:t.x2/e,y2:t.y2/n,w:t.w/e,h:t.h/n}},unscale:function(t){var e=this.opt.xscale,n=this.opt.yscale;return{x:t.x*e,y:t.y*n,x2:t.x2*e,y2:t.y2*n,w:t.w*e,h:t.h*n}},requestDelete:function(){return 1<this.ui.multi.length&&this.ui.selection.canDelete?this.deleteSelection():void 0},deleteSelection:function(){this.ui.selection&&(this.removeSelection(this.ui.selection),this.ui.multi[0].focus(),this.ui.selection.refresh())},animateTo:function(t){return this.ui.selection&&this.ui.selection.animateTo(t),this},setSelect:function(t){return this.ui.selection&&this.ui.selection.update(w.wrapFromXywh(t)),this},startDrag:function(){var i=this;return function(t){var e=l(t.target),n=e.closest("."+i.opt.css_selection).data("selection"),e=e.data("ord");return i.container.trigger("cropstart",[n,i.unscale(n.get())]),n.startDrag(t,e),!1}},resizeContainer:function(t,e){this.container.width(t).height(e),this.refresh()},setImage:function(n,i){var r=this,s=r.opt.imgTarget;return!!s&&void new l.Jcrop.component.ImageLoader(n,null,function(t,e){r.resizeContainer(t,e),s.src=n,l(s).width(t).height(e),r.applySizeConstraints(),r.refresh(),r.container.trigger("cropimage",[r,s]),"function"==typeof i&&i.call(r,t,e)})},update:function(t){this.ui.selection&&this.ui.selection.update(t)}}),l.fn.Jcrop=function(a,o){var t=this.eq(0).data("Jcrop"),e=Array.prototype.slice.call(arguments);return"api"==a?t:t&&"string"==typeof a?!!t[a]&&(e.shift(),t[a].apply(t,e),t):void this.each(function(){var i,r=this,s=l(this),t=s.data("Jcrop");return t?t.setOptions(a):"IMG"==this.tagName?l.Jcrop.component.ImageLoader.attach(this,function(t,e){var n=s.wrap("<div />").parent();n.width(t).height(e),i=l.Jcrop.attach(n,l.extend({},a,{imgTarget:r})),s.data("Jcrop",i),"function"==typeof o&&o.call(i)}):(i=l.Jcrop.attach(this,a),s.data("Jcrop",i),"function"==typeof o&&o.call(i)),this})},l.Jcrop=w}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){c.extend(c.fn,{validate:function(t){var i;if(this.length)return(i=c.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),i=new c.validator(t,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget,c(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==c(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function t(){var t,e;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(t=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(e=i.settings.submitHandler.call(i,i.currentForm,n),t&&t.remove(),void 0!==e&&e)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,t()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):t():(i.focusInvalid(),!1)})),i);t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,n;return c(this[0]).is("form")?t=this.validate().form():(n=[],t=!0,e=c(this[0].form).validate(),this.each(function(){(t=e.element(this)&&t)||(n=n.concat(e.errorList))}),e.errorList=n),t},rules:function(t,e){var n,i,r,s,a,o=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=o&&(!o.form&&l&&(o.form=this.closest("form")[0],o.name=this.attr("name")),null!=o.form)){if(t)switch(n=c.data(o.form,"validator").settings,i=n.rules,r=c.validator.staticRules(o),t){case"add":c.extend(r,c.validator.normalizeRule(e)),delete r.messages,i[o.name]=r,e.messages&&(n.messages[o.name]=c.extend(n.messages[o.name],e.messages));break;case"remove":return e?(a={},c.each(e.split(/\s/),function(t,e){a[e]=r[e],delete r[e]}),a):(delete i[o.name],r)}return(l=c.validator.normalizeRules(c.extend({},c.validator.classRules(o),c.validator.attributeRules(o),c.validator.dataRules(o),c.validator.staticRules(o)),o)).required&&(s=l.required,delete l.required,l=c.extend({required:s},l)),l.remote&&(s=l.remote,delete l.remote,l=c.extend(l,{remote:s})),l}}});function e(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var n;c.extend(c.expr.pseudos||c.expr[":"],{blank:function(t){return!e(""+c(t).val())},filled:function(t){t=c(t).val();return null!==t&&!!e(""+t)},unchecked:function(t){return!c(t).prop("checked")}}),c.validator=function(t,e){this.settings=c.extend(!0,{},c.validator.defaults,t),this.currentForm=e,this.init()},c.validator.format=function(n,t){return 1===arguments.length?function(){var t=c.makeArray(arguments);return t.unshift(n),c.validator.format.apply(this,t)}:(void 0===t||((t=2<arguments.length&&t.constructor!==Array?c.makeArray(arguments).slice(1):t).constructor!==Array&&(t=[t]),c.each(t,function(t,e){n=n.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||-1!==c.inArray(e.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,n){("radio"===t.type?this.findByName(t.name):c(t)).addClass(e).removeClass(n)},unhighlight:function(t,e,n){("radio"===t.type?this.findByName(t.name):c(t)).removeClass(e).addClass(n)}},setDefaults:function(t){c.extend(c.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var e,n,i=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");!this.form&&i&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name")),r===this.form&&(i=c.data(this.form,"validator"),e="on"+t.type.replace(/^validate/,""),(n=i.settings)[e])&&!c(this).is(n.ignore)&&n[e].call(i,this,t)}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.currentForm,i=this.groups={};c.each(this.settings.groups,function(n,t){"string"==typeof t&&(t=t.split(/\s/)),c.each(t,function(t,e){i[e]=n})}),n=this.settings.rules,c.each(n,function(t,e){n[t]=c.validator.normalizeRule(e)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e,n,i=this.clean(t),r=this.validationTargetFor(i),s=this,a=!0;return void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=c(r),(n=this.groups[r.name])&&c.each(this.groups,function(t,e){e===n&&t!==r.name&&(i=s.validationTargetFor(s.clean(s.findByName(t))))&&i.name in s.invalid&&(s.currentElements.push(i),a=s.check(i)&&a)}),e=!1!==this.check(r),a=a&&e,this.invalid[r.name]=!e,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c(t).attr("aria-invalid",!e)),a},showErrors:function(e){var n;e&&(c.extend((n=this).errorMap,e),this.errorList=c.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=c.grep(this.successList,function(t){return!(t.name in e)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===c.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var n=this,i={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var t=this.name||c(this).attr("name"),e=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");return!t&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),e&&(this.form=c(this).closest("form")[0],this.name=t),!(this.form!==n.currentForm||t in i||!n.objectLength(c(this).rules())||(i[t]=!0,0))})},clean:function(t){return c(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([])},reset:function(){this.resetInternals(),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e=c(t),n=t.type,i=void 0!==e.attr("contenteditable")&&"false"!==e.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(t.name).filter(":checked").val():"number"===n&&void 0!==t.validity?t.validity.badInput?"NaN":e.val():(t=i?e.text():e.val(),"file"===n?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(i=t.lastIndexOf("/"))||0<=(i=t.lastIndexOf("\\"))?t.substr(i+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(e){e=this.validationTargetFor(this.clean(e));var t,n,i,r,s=c(e).rules(),a=c.map(s,function(t,e){return e}).length,o=!1,l=this.elementValue(e);for(n in"function"==typeof s.normalizer?r=s.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(l=r.call(e,l),delete s.normalizer),s){i={method:n,parameters:s[n]};try{if("dependency-mismatch"===(t=c.validator.methods[n].call(this,l,e,i.parameters))&&1===a)o=!0;else{if(o=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,i),!1}}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+i.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+i.method+"' method."),t}}if(!o)return this.objectLength(s)&&this.successList.push(e),!0},customDataMessage:function(t,e){return c(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||c(t).data("msg")},customMessage:function(t,e){t=this.settings.messages[t];return t&&(t.constructor===String?t:t[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){var n=this.findDefined(this.customMessage(t.name,(e="string"==typeof e?{method:e}:e).method),this.customDataMessage(t,e.method),!this.settings.ignoreTitle&&t.title||void 0,c.validator.messages[e.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,e.parameters,t):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),e.parameters)),n},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return t=this.settings.wrapper?t.add(t.parent(this.settings.wrapper)):t},defaultShowErrors:function(){for(var t,e,n=0;this.errorList[n];n++)e=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,e.element,this.settings.errorClass,this.settings.validClass),this.showLabel(e.element,e.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,t=this.validElements();t[n];n++)this.settings.unhighlight.call(this,t[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var n,i,r,s=this.errorsFor(t),a=this.idOrName(t),o=c(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(e)):(i=s=c("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,c(t)):i.insertAfter(t),s.is("label")?s.attr("for",a):0===s.parents("label[for='"+this.escapeCssMeta(a)+"']").length&&(i=s.attr("id"),o?o.match(new RegExp("\\b"+this.escapeCssMeta(i)+"\\b"))||(o+=" "+i):o=i,c(t).attr("aria-describedby",o),n=this.groups[t.name])&&c.each((r=this).groups,function(t,e){e===n&&c("[name='"+r.escapeCssMeta(t)+"']",r.currentForm).attr("aria-describedby",s.attr("id"))})),!e&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var e=this.escapeCssMeta(this.idOrName(t)),t=c(t).attr("aria-describedby"),e="label[for='"+e+"'], label[for='"+e+"'] *";return t&&(e=e+", #"+this.escapeCssMeta(t).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||!this.checkable(t)&&t.id||t.name},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),c(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return c(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return c("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!c(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!c.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,c(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],c(t).removeClass(this.settings.pendingClass),e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,e){return e="string"==typeof e&&e||"remote",c.data(t,"previousValue")||c.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:e})})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:c.extend(this.classRuleSettings,t)},classRules:function(t){var e={},t=c(t).attr("class");return t&&c.each(t.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(e,c.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,n,i){(i=/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i))?void 0:i)||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(t){var e,n,i={},r=c(t),s=t.getAttribute("type");for(e in c.validator.methods)n="required"===e?(n=t.getAttribute(e),""===n&&(n=!0),!!n):r.attr(e),this.normalizeAttributeRule(i,s,e,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var e,n,i={},r=c(t),s=t.getAttribute("type");for(e in c.validator.methods)n=r.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),""===n&&(n=!0),this.normalizeAttributeRule(i,s,e,n);return i},staticRules:function(t){var e={},n=c.data(t.form,"validator");return e=n.settings.rules?c.validator.normalizeRule(n.settings.rules[t.name])||{}:e},normalizeRules:function(i,r){return c.each(i,function(t,e){if(!1===e)delete i[t];else if(e.param||e.depends){var n=!0;switch(typeof e.depends){case"string":n=!!c(e.depends,r.form).length;break;case"function":n=e.depends.call(r,r)}n?i[t]=void 0===e.param||e.param:(c.data(r.form,"validator").resetElements(c(r)),delete i[t])}}),c.each(i,function(t,e){i[t]="function"==typeof e&&"normalizer"!==t?e(r):e}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var t;i[this]&&(Array.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(t=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(t[0]),Number(t[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength)&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength),i},normalizeRule:function(t){var e;return"string"==typeof t&&(e={},c.each(t.split(/\s/),function(){e[this]=!0}),t=e),t},addMethod:function(t,e,n){c.validator.methods[t]=e,c.validator.messages[t]=void 0!==n?n:c.validator.messages[t],e.length<3&&c.validator.addClassRules(t,c.validator.normalizeRule(t))},methods:{required:function(t,e,n){return this.depend(n,e)?"select"===e.nodeName.toLowerCase()?(n=c(e).val())&&0<n.length:this.checkable(e)?0<this.getLength(t,e):null!=t&&0<t.length:"dependency-mismatch"},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:(n=!1,function(t,e){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())}),dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,n){t=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=t},maxlength:function(t,e,n){t=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||t<=n},rangelength:function(t,e,n){t=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||t>=n[0]&&t<=n[1]},min:function(t,e,n){return this.optional(e)||n<=t},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(t,e,n){function i(t){return(t=(""+t).match(/(?:\.(\d+))?$/))&&t[1]?t[1].length:0}function r(t){return Math.round(t*Math.pow(10,s))}var s,a=c(e).attr("type"),o="Step attribute on input type "+a+" is not supported.",l=new RegExp("\\b"+a+"\\b"),u=!0;if(a&&!l.test(["text","number","range"].join()))throw new Error(o);return s=i(n),(i(t)>s||r(t)%r(n)!=0)&&(u=!1),this.optional(e)||u},equalTo:function(t,e,n){n=c(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(e).valid()}),t===n.val()},remote:function(i,r,t,s){if(this.optional(r))return"dependency-mismatch";s="string"==typeof s&&s||"remote";var a,e,o=this.previousValue(r,s);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),o.originalMessage=o.originalMessage||this.settings.messages[r.name][s],this.settings.messages[r.name][s]=o.message,e=c.param(c.extend({data:i},(t="string"==typeof t?{url:t}:t).data)),o.old===e?o.valid:(o.old=e,(a=this).startRequest(r),(e={})[r.name]=i,c.ajax(c.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:e,context:a.currentForm,success:function(t){var e,n=!0===t||"true"===t;a.settings.messages[r.name][s]=o.originalMessage,n?(e=a.formSubmitted,a.resetInternals(),a.toHide=a.errorsFor(r),a.formSubmitted=e,a.successList.push(r),a.invalid[r.name]=!1,a.showErrors()):(e={},t=t||a.defaultMessage(r,{method:s,parameters:i}),e[r.name]=o.message=t,a.invalid[r.name]=!0,a.showErrors(e)),o.valid=n,a.stopRequest(r,n)}},t)),"pending")}}});var i,r={};return c.ajaxPrefilter?c.ajaxPrefilter(function(t,e,n){var i=t.port;"abort"===t.mode&&(r[i]&&r[i].abort(),r[i]=n)}):(i=c.ajax,c.ajax=function(t){var e=("mode"in t?t:c.ajaxSettings).mode,n=("port"in t?t:c.ajaxSettings).port;return"abort"===e?(r[n]&&r[n].abort(),r[n]=i.apply(this,arguments),r[n]):i.apply(this,arguments)}),c});var validateUserpassword={p_policy_uppercase:function(t){this.name="p_policy_uppercase";if(/^(?=.*[A-Z]).+$/.test(t))return"p_policy_uppercase"},p_policy_lowercase:function(t){this.name="p_policy_lowercase";if(/^(?=.*[a-z]).+$/.test(t))return"p_policy_lowercase"},p_policy_number:function(t){this.name="p_policy_number";if(/^(?=.*\d).+$/.test(t))return"p_policy_number"},p_policy_specialcharacter:function(t){this.name="p_policy_specialcharacter";if(/^(?=.*(_|[^\w])).+$/.test(t))return"p_policy_specialcharacter"},p_policy_length:function(t){if(this.name="p_policy_length",t.length>=$('meta[name="password_policy:minlength"]').attr("content"))return"p_policy_length"}};function passwordBoxHightlight(t){var e="",n=($(t).closest("div").addClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),r=n?"su-password-tick":"su-tick";if("new-password"==$(t).attr("id")){for(var s=0;s<i.length;s++)$(i[s]).attr("class")==r?$(t).closest("div").removeClass("e-error"):e="unsatisfied-rule";""!=e&&null!=e&&$(t).closest("div").addClass("e-error")}}function passwordBoxUnhightlight(t){var e="",n=($(t).closest("div").removeClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),r=n?"su-password-tick":"su-tick";if("new-password"==$(t).attr("id")){for(var s=0;s<i.length;s++)$(i[s]).attr("class")!=r&&(e="unsatisfied-rule"),$(i[s]).attr("class")==r&&$(t).closest("div").removeClass("e-error");""!=e&&null!=e&&($(t).closest("div").addClass("e-error"),e="")}$(t).closest("div").find(".password-validate-holder").html("")}function passwordPolicyPopover(t,e){var n=$(t),i=(n.popover("show"),new Array);i.push(validateUserpassword.p_policy_uppercase),i.push(validateUserpassword.p_policy_lowercase),i.push(validateUserpassword.p_policy_number),i.push(validateUserpassword.p_policy_specialcharacter),i.push(validateUserpassword.p_policy_length),$.each(i,function(t){t=i[t];null!=(ruleName=t(e))&&""!=ruleName?n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")||n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").addClass("su-password-tick").removeClass("icon"):(ruleName=name,n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")&&n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").removeClass("su-password-tick").addClass("icon")),ruleName=""})}$.validator.addMethod("isValidPassword",function(t,e){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",t),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},"");var userDetails,isKeyUp=!1;function successMessage(){"block"==$("#invalid-firstname, #invalid-lastname, #invalid-email").css("display")&&$("#updation-validation-message").css("display","none")}function onUserChangePasswordClick(){$("#user-id").val();$(".validation-message").html(""),$("#new-password-validate, #confirm-password-validate").closest("div").prev("div").removeClass("has-error");var t=!0;(t=$(".change-password-form").valid())&&$("#new-password").val()!=$("#confirm-password").val()&&($("#confirm-password-validate").html(window.Server.App.LocalizationContent.PasswordsMismatch),$("#confirm-password-validate").closest("div").prev("div").addClass("has-error"),t=!1),0!=t&&(showWaitingPopup("content-area"),doAjaxPost("POST",UpdatePasswordUrl,{newpassword:$("#new-password").val(),confirmpassword:$("#confirm-password").val(),userId:$("#user-id").val()},function(t){$("input[type='password']").val(""),hideWaitingPopup("content-area"),$("#password_policy_rules").remove(),$("#confirm-password-section").removeAttr("style"),t.Data.status?SuccessAlert(window.Server.App.LocalizationContent.UpdatePassword,window.Server.App.LocalizationContent.PasswordSuccess,7e3):WarningAlert(window.Server.App.LocalizationContent.UpdatePassword,window.Server.App.LocalizationContent.PasswordFailure,t.Data.Message,7e3)}),$(".popover").hide())}function editUser(t){var e=t;userDetails=t,$("#user-name").val(e.UserName),$("#user-email").val(e.Email.toString().includes(autoGeneratedEmail)?"":e.Email),$("#user-head").html(e.FirstName+" "+e.LastName),$("#status-user").val(e.StatusDescription),$("#activation-div").val(),null!=t.FirstName&&""!=t.FirstName?$("#user-firstname").val(t.FirstName):$("#user-firstname").val(e.FullName),null!=t.LastName&&""!=t.LastName&&$("#user-lastname").val(t.LastName),null!=t.Contact&&""!=t.Contact&&$("#user-phonenumber").val(t.Contact)}function SaveUserdetails(){$("#updation-validaton-message").html(""),$("#email-duplicate-validation").closest("div").prev("div").removeClass("has-error");var t,e=$("#user-firstname").val().trim(),n=$("#user-email").val().trim(),i=!0;$(".edit-user-profile-form").valid()&&($(".userprofile-validation-messages").css("display","none"),t=$("#user-status").val(),i=!!$("#show-active").hasClass("show")||!!$("#container-select").hasClass("show")&&t,showWaitingPopup("content-area"),doAjaxPost("POST",updateUserProfileUrl,{username:$("#user-name").val(),email:n,picturename:$("#upload-picture").attr("data-filename"),firstname:e,lastname:$("#user-lastname").val(),mobile:$("#user-phonenumber").val().trim(),status:i},function(t){var e,n,i,r,s;hideWaitingPopup("content-area"),t.Data.status?(e=null!=(s=t.Data.profileinfo).firstName?$("#user-firstname").val(s.firstName):$("#user-firstname").val(s.previousFirstName),n=null!=s.lastName?$("#user-lastname").val(s.lastName):$("#user-lastname").val(s.previousLastName),i=null!=s.email?$("#user-email").val(s.email):$("#user-email").val(s.previousMail),r=null!=s.mobile?$("#user-phonenumber").val(s.mobile):$("#user-phonenumber").val(s.previousMobile),s="false"==s.status.toLowerCase()?$("#status-user").val("Inactive"):$("#status-user").val("Active"),userDetails={FirstName:e.val(),LastName:n.val(),ContactNumber:r.val(),Email:i.val(),Status:s.val()},SuccessAlert("Update Profile",t.Data.value,7e3),$("#password-updation-validation").css("display","none"),$(".userpassword-validation-messages").css("display","none"),$("#new-password-validate").closest("div").prev("div").removeClass("has-error"),$("#confirm-password-validate").closest("div").prev("div").removeClass("has-error"),t.Data.isCurrentUser&&$("#display-name").html(e.val()+" "+n.val().trim()),$("#display-name").html(e.val()+" "+n.val().trim())):t.Data.status||"email"!=t.Data.key?(SuccessAlert("Update Profile",t.Data.value,7e3),$("#password-updation-validation").css("display","none"),$(".userpassword-validation-messages").css("display","none")):($("#email-duplicate-validation").html(t.Data.value).css("display","block"),$("#email-duplicate-validation").closest("div").prev("div").addClass("has-error"))}),$(".edit-user-profile-field").attr("disabled",!0).removeClass("enable"),$("#save-button,#cancel-button,#status-dom").hide(),$("#edit,#group-div,#status-show").show(),$("#status-div").removeClass("top-margin"))}function onPictureCropEnd(t){$("input[name=LeftOfCropArea]").val(t.x),$("input[name=TopOfCropArea]").val(t.y),$("input[name=LeftToCropArea]").val(t.x2),$("input[name=TopToCropArea]").val(t.y2),$("input[name=height]").val(t.h),$("input[name=width]").val(t.w)}function onSingleDeleteDialogOpen(){$("#singleuser-delete-confirmation").find("button.e-primary").addClass("critical-action-button"),null!=document.getElementById("singleuser-delete-confirmation")&&document.getElementById("singleuser-delete-confirmation").ej2_instances[0].show()}function onMakeAdminDialogOpen(){document.getElementById("make-admin-confirmation").ej2_instances[0].show()}function onRemoveAdminDialogOpen(){document.getElementById("remove-admin-confirmation").ej2_instances[0].show()}function MakeSingleUserAdmin(){var t=$(".make-admin").attr("data-content");showWaitingPopup("make-admin-confirmation"),$.ajax({type:"POST",url:makeAdminUrl,data:"&users="+t,success:function(t){hideWaitingPopup("make-admin-confirmation"),onMakeAdminDialogClose(),window.location.reload()}})}function onMakeAdminDialogClose(){document.getElementById("make-admin-confirmation").ej2_instances[0].hide()}function removeAdmin(){var t=$(".remove-admin").attr("data-content");showWaitingPopup("remove-admin-confirmation"),$.ajax({type:"POST",url:removeAdminUrl,data:{userId:t},success:function(t){hideWaitingPopup("remove-admin-confirmation"),onRemoveAdminDialogClose(),window.location.reload()}})}function onRemoveAdminDialogClose(){document.getElementById("remove-admin-confirmation").ej2_instances[0].hide()}function deleteSingleUser(){showWaitingPopup("singleuser-delete-confirmation");var t=$(".is-delete").attr("data-content");doAjaxPost("POST",deleteSingleFromUserListUrl,"UserId="+t,function(t){t.status?window.location.href=userPageUrl:(hideWaitingPopup("singleuser-delete-confirmation"),onSingleDeleteDialogClose(),window.location.reload())})}function onSingleDeleteDialogClose(){document.getElementById("singleuser-delete-confirmation").ej2_instances[0].hide()}function onDisableMfaDialogOpen(){$("#disable-mfa-confirmation").find("button.e-primary").addClass("critical-action-button"),document.getElementById("disable-mfa-confirmation").ej2_instances[0].show()}function onDisableMfaDialogClose(){document.getElementById("disable-mfa-confirmation").ej2_instances[0].hide(),window.location.reload()}function onRecoveryCodeDialogOpen(){document.getElementById("recovery-code-regeneration-confirmation").ej2_instances[0].show()}function onRecoveryCodeDialogClose(){document.getElementById("recovery-code-regeneration-confirmation").ej2_instances[0].hide()}function disableMfa(){showWaitingPopup("content-area");var t=document.getElementById("user-id").value;$.ajax({type:"POST",url:disableMfaUrl,data:{userId:t},async:!1,success:function(t){hideWaitingPopup("content-area"),window.location.reload()}})}function onShowRecoveryCodeDialogOpen(){document.getElementById("recovery-code-box").ej2_instances[0].show()}function onShowRecoveryCodeDialogClose(){document.getElementById("recovery-code-box").ej2_instances[0].hide(),window.location.reload()}function regenerateRecoveryCode(){showWaitingPopup("content-area");var t=document.getElementById("user-id").value;$.ajax({type:"POST",url:regenerateRecoveryCodeUrl,data:{userId:t},success:function(t){if(t.Data.status&&""!=t.Data.recovery){onShowRecoveryCodeDialogOpen(),$(".mfa-success-message").css("display","none");var n=document.getElementById("table-recovery"),i=t.Data.recovery.split(";");document.getElementById("copy-recovery").value=i;for(let e=0;e<i.length;e+=2){var r=n.insertRow();for(let t=0;t<2;t++){var s=i[e+t];r.insertCell().appendChild(document.createTextNode(""+s))}}}hideWaitingPopup("content-area")}})}function copyToClip(){value=document.getElementById("copy-recovery").value,navigator.clipboard.writeText(value),setTimeout(function(){$("#recovery-code-copy").attr("data-original-title",window.Server.App.LocalizationContent.Copied),$("#recovery-code-copy").tooltip("show")},200),setTimeout(function(){$("#recovery-code-copy").attr("data-original-title",window.Server.App.LocalizationContent.ClickToCopy),$("#recovery-code-copy").tooltip()},3e3)}function unLockUser(){var t=null==(t=$(".unlock-user-id").attr("data-content"))?document.getElementById("user-id").value:t,e=(showWaitingPopup("unlock-user-confirmation"),null===document.getElementById("user_grid")?null:document.getElementById("user_grid").ej2_instances[0]);unlockUser(t)?null===e?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(SuccessAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlocked,7e3),e.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation")):null===e?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(WarningAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlockedError,null,7e3),e.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation"))}function onUserUnlockDialogOpen(){document.getElementById("unlock-user-confirmation").ej2_instances[0].show()}function onUserUnlockDialogClose(){document.getElementById("unlock-user-confirmation").ej2_instances[0].hide()}function unlockUser(t){var e=!1;return $.ajax({type:"POST",url:unlockUserUrl,async:!1,data:{userId:t},success:function(t){e=t.Status}}),e}function CheckMailSettingsAndNotify(e,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(t){"success"==t.result||0==t.activation?void 0!==n&&n.html("<span class='SuccessMessage'>"+i+"</span>"):"failure"==t.result&&1==t.isAdmin&&1==t.activation&&void 0!==n&&n.html("<span class='alert alert-danger'>"+e+"</span>")}})}function ValidateMailSettingsAndShowToast(e,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(t){"success"==t.result||0==t.activation?void 0!==n&&SuccessAlert("Activate User",i,7e3):"failure"==t.result&&1==t.isAdmin&&1==t.activation&&void 0!==n&&n.html("<span class='alert alert-danger'>"+e+"</span>")}})}$(document).ready(function(){var t;$.now();addPlacehoder("body"),$(".security-setting-container").is(":visible")&&(location.href.match(/2fa/)||isShow2fa?($("#2fa").tab("show"),$("#user-management-options").hide(),(t=window.location.search.toString()).includes("&view=2fa")||history.pushState(null,"",t+"&view=2fa")):($("#change-password").tab("show"),$("#user-management-options").show(),(t=window.location.search.toString()).includes("&view=change-password")||history.pushState(null,"",t+"&view=change-password"))),$("a[data-toggle='tab']").on("click",function(t){var e;"change-password"==$(this).attr("id")?($("#user-management-options").show(),(e=window.location.search.toString()).includes("&view=2fa")?(e=e.replace("&view=2fa","&view=change-password"),history.pushState(null,"",e)):e.includes("&view=change-password")||history.pushState(null,"",e+"&view=change-password")):"2fa"==$(this).attr("id")&&($("#user-management-options").hide(),(e=window.location.search.toString()).includes("&view=change-password")?(e=e.replace("&view=change-password","&view=2fa"),history.pushState(null,"",e)):e.includes("&view=2fa")||history.pushState(null,"",e+"&view=2fa")),$(".success-message, .error-message").hide()}),$.validator.addMethod("isValidEmail",function(t,e){return""==t.trim()||IsEmail(t)},window.Server.App.LocalizationContent.InvalidEmailAddress),$.validator.addMethod("isRequired",function(t,e){return!isEmptyOrWhitespace(t)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("isValidName",function(t,e){return IsValidName("name",t)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("isValidUsername",function(t,e){return IsValidUsername(t)},window.Server.App.LocalizationContent.InvalidUsername),$.validator.addMethod("isValidUsernameLength",function(t,e){return IsValidUsernameLength(t)},window.Server.App.LocalizationContent.UsernameExceeds),$.validator.addMethod("isValidPhoneNumber",function(t,e){return IsValidContactNumber(t)},window.Server.App.LocalizationContent.PhoneNumberValidator),addPlacehoder("#user-phonenumber"),$(".edit-user-profile-form").validate({errorElement:"span",onkeyup:function(t,e){$("#updation-validation-message").html(""),9!=e.keyCode&&(isKeyUp=!0,$(t).valid(),isKeyUp=!1)},onfocusout:function(t){$(t).valid(),$("#updation-validation-message").html("")},rules:{"user-username":{isRequired:!0,isValidUsernameLength:!0,isValidUsername:!0},"user-email":{isValidName:!0,isValidEmail:!0},"user-firstname":{isRequired:!0,isValidName:!0},"user-lastname":{isValidName:!0},"user-phonenumber":{isValidPhoneNumber:!0}},highlight:function(t){$("#"+t.id).not(":disabled")&&$(t).closest("div").addClass("has-error")},unhighlight:function(t){$(t).closest("div").removeClass("has-error"),$(t).closest("div").find("span").html("")},errorPlacement:function(t,e){$("#"+e.context.id).not(":disabled")&&$(e).closest("div").find("span").html(t.html())},messages:{"user-firstname":{isRequired:window.Server.App.LocalizationContent.FirstNameValidator}}}),$(document).on("keyup","#new-password",function(){$("#new-password").val()==$("#confirm-password").val()?($("#confirm-password").closest("div").removeClass("has-error"),$("#confirm-password").closest("tr").next("tr").find("span").html("")):""!=$("#confirm-password").val()&&($("#confirm-password").closest("div").addClass("has-error"),$("#confirm-password").closest("div").next("div").find("span").html(window.Server.App.LocalizationContent.PasswordMismatch).css("display","block")),passwordPolicyPopover("#new-password",$("#new-password").val())}),$(".change-password-form").validate({errorElement:"span",onkeyup:function(t,e){$("#success-message").html(""),9!=e.keyCode&&(isKeyUp=!0,$(t).valid(),isKeyUp=!1)},onfocusout:function(t){$(t).valid(),$("#success-message").html("")},rules:{"new-password":{required:!0,isValidPassword:!0},"confirm-password":{required:!0,equalTo:"#new-password"}},highlight:function(t){$(t).closest("div").addClass("has-error"),passwordBoxHightlight(t)},unhighlight:function(t){$(t).closest("div").removeClass("has-error"),passwordBoxUnhightlight(t),$(t).closest("div").find(".validation-message").html("")},errorPlacement:function(t,e){$(e).closest("div").find(".validation-message").html(t.html())},messages:{"new-password":{required:window.Server.App.LocalizationContent.NewPasswordValidator,isValidPassword:window.Server.App.LocalizationContent.InvalidPasswordValidator},"confirm-password":{required:window.Server.App.LocalizationContent.ConfirmPasswordValidator,equalTo:window.Server.App.LocalizationContent.PasswordMismatch}}}),$("#new-password").on("change",function(){passwordPolicyPopover("#new-password",$("#new-password").val()),$("#new-password").valid()}),$(".edit-user-profile-field").on("keypress",function(t){if(13==t.keyCode)return t.preventDefault(),SaveUserdetails(),!1}),$(document).on("click","#activate-button-click",function(){$(".success-message").hide(),$("#activate-button-click").attr("disabled",!0).css("cursor","default");var e=$(this).attr("id");$.ajax({type:"POST",url:activateUserUrl,data:{username:$("#user-name").val(),email:$("#user-email").val(),firstname:$("#user-firstname").val()},success:function(t){$("#activate-button-click").attr("disabled",!1),"object"==$.type(t)&&("success"==t.Data.result&&1==t.Data.type?($("#"+e).hide(),$("<input>",{class:"primary-button password-save-button",type:"button",id:"resend-button-click",value:"Resend Activation Code",title:""}).insertAfter("#"+e),CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ActivationCodeGenerated+" <a href='"+emailSettingsUrl+"'>"+window.Server.App.LocalizationContent.ConfigureEmailSettings+"</a>",$("#alert-message"),window.Server.App.LocalizationContent.ActivationCodeSent)):"success"==t.Data.result&&($("#inactive-user").hide(),$('<span id="active-user">Active</span>').insertAfter("#inactive-user").addClass("content-size status"),$("#user-status").val("true"),$("#status-user").val("Active"),$("#"+e).attr("disabled",!0),ValidateMailSettingsAndShowToast("",$("#alert-message"),window.Server.App.LocalizationContent.UserAccountHasActivated)))}})}),$(document).on("click","#resend-button-click",function(){$(".success-message").hide(),$("#resend-button-click").attr("disabled",!0).css("cursor","default");$(this).attr("id");$.ajax({type:"POST",url:resendactivationcodeUrl,data:{username:$("#user-name").val(),email:$("#user-email").val(),firstname:$("#user-firstname").val()},success:function(t){$("#resend-button-click").attr("disabled",!1),"object"==$.type(t)&&"success"==t.Data.result&&(CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ActivationCodeGenerated+" <a href='"+emailSettingsUrl+"'>"+window.Server.App.LocalizationContent.ConfigureEmailSettings+"</a>",$("#alert-message"),window.Server.App.LocalizationContent.ActivationCodeResent),$("#edit").addClass("adjustment"))}})}),$(document).on("click","#avatar-delete-click",function(){messageBox("su-delete",window.Server.App.LocalizationContent.DeleteProfilePicture,window.Server.App.LocalizationContent.DeleteProfilePictureConfirm+"?","error",function(){deleteUserAvatar()})}),$("#avatar-button-click").click(function(){$("#image-path").val(window.Server.App.LocalizationContent.BrowseImagePath).removeClass("ValidationErrorImage"),$("#image-path").closest("div").removeClass("has-error"),$("#avatar-upload-box").ejDialog("open"),$("#cancel-avatar-popup").click(function(){$("#profile-picture").attr("src",tanantManagementServerResourceUrl+"/images/common/preview.jpg"),$("#upload-image").attr("disabled","disabled"),$(".img-container").children().hasClass("jcrop-active")&&$("#profile-picture").data("Jcrop").destroy(),$("#avatar-upload-box").ejDialog("close")}),$(".e-uploadinput").attr({title:window.Server.App.LocalizationContent.NoFileSelected,accept:".png, .jpg ,.jpeg"}),"msie"==browser.name.toLowerCase()||"webkit"==browser.name.toLowerCase()?$(".e-selectpart").addClass("upload-box"):$(".e-selectpart").removeClass("upload-box");var t=getMaxZIndex()+2;$("#avatar-upload-box a.popup-close").trigger("mouseover").mouseover(function(){$(".tooltip").css("z-index",t)})}),createWaitingPopup("make-admin-confirmation"),createWaitingPopup("remove-admin-confirmation"),createWaitingPopup("singleuser-delete-confirmation"),createWaitingPopup("content-area"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AssignRole,content:document.getElementById("make-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:MakeSingleUserAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onMakeAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"}}).appendTo("#make-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RemoveRole,content:document.getElementById("remove-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:removeAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRemoveAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"}}).appendTo("#remove-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DeleteUser,content:document.getElementById("singleuser-delete-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:deleteSingleUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onSingleDeleteDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#singleuser-delete-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RegenerateRecoveryCode,content:document.getElementById("recovery-code-regeneration-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:regenerateRecoveryCode,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRecoveryCodeDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#recovery-code-regeneration-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DisableMfa,content:document.getElementById("disable-mfa-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:disableMfa,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onDisableMfaDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:onDisableMfaDialogClose}).appendTo("#disable-mfa-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RecoveryCode,content:document.getElementById("recovery-code-box-content"),showCloseIcon:!0,buttons:[{click:onShowRecoveryCodeDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.CloseButton}}],width:"424px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:onShowRecoveryCodeDialogClose}).appendTo("#recovery-code-box")}),$(document).on("click","#edit",function(t){$("#save-button,#status-dom").show(),$("#cancel-button").css("display","inline"),$("#group-div,#status-show,#edit,#activation-div").hide(),$("#resend-button-click").removeClass("show"),$("#status-div").addClass("top-margin"),$("#show-active,#show-inactive,#show-active-user").find("span").addClass("margin-top"),$(".edit-user-profile-field").attr("disabled",!1).addClass("enable")}),$(document).on("click","#cancel-button",function(t){$("#user-firstname").val(userDetails.FirstName),$("#user-email").val(userDetails.Email),$("#user-lastname").val(userDetails.LastName),$("#user-phonenumber").val(userDetails.ContactNumber),$("#status-div").removeClass("top-margin"),$("#show-active,#show-inactive,#show-active-user").find("span").removeClass("margin-top"),0==userDetails.Status?$("#status-user").html("Active"):$("#status-user").html("InActive"),$(".alert-messages").closest("div").removeClass("has-error form-control"),$(".alert-messages").html(""),$(".edit-user-profile-field").attr("disabled",!0).removeClass("enable"),$("#save-button,#status-dom,#cancel-button").hide(),$("#edit, #status-show, #group-div,#activation-div").show(),"Active"==$("#status-user").val&&$("#activate-button-click").hide()}),"InActive"==$("#status-user").val&&$("#activate-button-click").removeClass("hide"),$(document).on("click",".delete-class",function(){$(this).parent("li").addClass("is-delete"),onSingleDeleteDialogOpen()}),$(document).on("click",".make-admin-class",function(){$(this).parent("li").addClass("make-admin"),onMakeAdminDialogOpen()}),$(document).on("click",".remove-admin-class",function(){$(this).parent("li").addClass("remove-admin"),onRemoveAdminDialogOpen()}),$(document).on("click","#mfa-disable-button",function(){onDisableMfaDialogOpen()}),$(document).on("click","#generate-recovery-code",function(){onRecoveryCodeDialogOpen()}),$(document).ready(function(){new ej.popups.Dialog({header:window.Server.App.LocalizationContent.UnlockUser,content:document.getElementById("unlock-user-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:unLockUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onUserUnlockDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#unlock-user-confirmation"),createWaitingPopup("unlock-user-confirmation")}),$(document).on("click",".unlock-user-class",function(){$(this).parent("li").addClass("unlock-user-id"),onUserUnlockDialogOpen()}),$(document).on("click",".unlock-userclass",function(){unlockUser($(".unlock_user").attr("data-content")),window.location.reload()}),$(document).on("click","#unlock-user",function(){onUserUnlockDialogOpen()}),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})});var editCustomAttributeId,currentIndex,isCustomAttributeBinded=!1,isAttributeEdit=!1,customAttributeInfo="",addSiteAttribute=[],siteCreation=!1,customAttributeId=0;function isAttributeExist(){return!$("#custom-attribute-name").hasClass("e-error")}function openCustomAttributeDialog(t,e){var n,i,r;isCustomAttributeBinded?((r=document.getElementById("custom-attribute-dialog").ej2_instances)[0].buttons=[{click:onCloseCustomAttribute,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:saveAttribute,buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SaveButton}}],r[0].show()):((n=document.createElement("div")).setAttribute("id","custom-attribute-dialog"),"addtenant"==e?(i=document.getElementById("popup-container"),siteCreation=!0):i=document.getElementById("content-area"),i.appendChild(n),$("#custom-attribute-dialog").css("height",$("#popup-container").height()),(r=new ejs.popups.Dialog({header:'<div class="dlg-title">'+window.Server.App.LocalizationContent.AddCustomAttribute+"</div>",content:document.getElementById("custom-attribute-content"),buttons:[{click:onCloseCustomAttribute,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:saveAttribute,buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SaveButton}}],animationSettings:{effect:"Zoom"},beforeOpen:showCustomAttribute,beforeClose:beforeCloseAttributeDialog,close:onCloseCustomAttribute,width:"514px",height:"474px",showCloseIcon:!0,isModal:!0})).appendTo(n),isCustomAttributeBinded=!0),isAttributeEdit&&setTimeout(function(){showSavedAttributes()},200),createWaitingPopup("custom-attribute-dialog")}function saveAttribute(){var t="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl;if($("#custom-attribute-form").valid()&&!$("#custom-attribute-name").hasClass("e-error"))if(isAttributeEdit){if(0!=addSiteAttribute.length)for(var e=document.getElementById("AddSiteAttributesGrid").ej2_instances[0],n=$("#custom-attribute-name").val().trim(),i=0;i<e.dataSource.length;i++)e.dataSource[i].Name.toLowerCase()==n.toLowerCase()&&e.dataSource[i].CustomAttributeId!=editCustomAttributeId&&($("#custom-attribute-name").closest("div").addClass("e-error"),$("#custom-attribute-name").closest(".e-outline").addClass("e-error"),$("#custom-attribute-name").closest(".e-outline").siblings(".custom-attr-validation-errors").html(window.Server.App.LocalizationContent.IsAttributeNameExist)),e.dataSource[i].CustomAttributeId==editCustomAttributeId&&(currentIndex=i);$("#custom-attribute-name").closest("div").hasClass("e-error")||updateCustomAttribute(customAttributeInfo.Id)}else saveCustomAttribute();(t?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0].clearSelection()}function onCloseCustomAttribute(){$("#custom-attribute-form").find("div.validation-errors").html(""),$("#custom-attribute-form").find("div").removeClass("e-error"),document.getElementById("custom-attribute-dialog").ej2_instances[0].hide();var t=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];t.clearSelection()}function showSavedAttributes(){var t=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];customAttributeInfo=t.getCurrentViewRecords()[t.getSelectedRowIndexes()],document.getElementById("custom-attribute-name").ej2_instances[0].value=customAttributeInfo.Name,document.getElementById("custom-attribute-descrition").ej2_instances[0].value=customAttributeInfo.Description,customAttributeInfo.CanEncrypt||(document.getElementById("custom-attribute-value").ej2_instances[0].value=customAttributeInfo.Value),$("#encrypt-custom-attribute").prop("checked",customAttributeInfo.CanEncrypt),editCustomAttributeId=customAttributeInfo.CustomAttributeId}function showCustomAttribute(){document.getElementById("custom-attribute-dialog").ej2_instances[0].header=isAttributeEdit?window.Server.App.LocalizationContent.EditCustomAttribute:window.Server.App.LocalizationContent.AddCustomAttribute,updateValidationMessages(),$("#custom-attribute-content").show(),$("#custom-attribute-name").focus()}function saveCustomAttribute(){var t,e,n={Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId},i="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl;i&&(n={Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId,UserId:UserId=userId}),customAttributeId++,showWaitingPopup("custom-attribute-dialog"),!i&&siteCreation?addSiteLevelAttribute(n):(t={customAttribute:JSON.stringify(n)},i?(t={customAttribute:JSON.stringify(n)},saveCustomAttributeUrl=addUserCustomAttributeUrl):t={customAttribute:JSON.stringify(n),tenantInfoId:tenantInfoId},showWaitingPopup("custom-attribute-dialog"),e=document.getElementById("custom-attribute-dialog").ej2_instances,$.ajax({type:"POST",url:saveCustomAttributeUrl,data:t,success:function(t){t.Status?(getSiteOrUseAttributes(),SuccessAlert(window.Server.App.LocalizationContent.AddCustomAttribute,window.Server.App.LocalizationContent.CustomAttributeSuccess,7e3),hideWaitingPopup("custom-attribute-dialog"),e[0].hide()):(hideWaitingPopup("custom-attribute-dialog"),isEmptyOrWhitespace(t.Message)?(WarningAlert(window.Server.App.LocalizationContent.AddCustomAttribute,window.Server.App.LocalizationContent.CustomAttributeFailure,t.ErrorMessage,7e3),e[0].hide()):($("#custom-attribute-name").addClass("e-error"),$("#custom-attribute-form").valid()))}}))}function beforeCloseAttributeDialog(){updateValidationMessages(),isAttributeEdit=!1,customAttributeInfo="",$("#custom-attribute-form").find(".e-input-group").removeClass("e-error")}function attributeNameCheck(){var t=$("#custom-attribute-name").val().trim(),e={attributeName:t};"undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?(e={attributeName:t,userId:userId},isAttributeNameExistsUrl=isUserCustomAttributeNameExistUrl):e={attributeName:t,tenantInfoId:tenantInfoId},$.ajax({type:"POST",url:isAttributeNameExistsUrl,data:e,success:function(t){t.Status?$("#custom-attribute-name").addClass("e-error"):$("#custom-attribute-name").removeClass("e-error"),$("[name='custom-attribute-name']").valid()}})}function updateCustomAttribute(t){var e,n="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl,i={Id:t,Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:editCustomAttributeId};n&&(i={Id:t,Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,UserId:UserId=userId},updateCustomAttributeUrl=editUserCustomAttributeUrl),showWaitingPopup("custom-attribute-dialog"),siteCreation?updateSiteLevelAttribute(i):(t={customAttribute:JSON.stringify(i)},t=n?{customAttribute:JSON.stringify(i)}:{customAttribute:JSON.stringify(i),tenantInfoId:tenantInfoId},e=document.getElementById("custom-attribute-dialog").ej2_instances,$.ajax({type:"POST",url:updateCustomAttributeUrl,data:t,success:function(t){t.Status?(getSiteOrUseAttributes(),SuccessAlert(window.Server.App.LocalizationContent.EditCustomAttribute,window.Server.App.LocalizationContent.UpdateCustomAttributeSuccess,7e3),hideWaitingPopup("custom-attribute-dialog"),e[0].hide()):(hideWaitingPopup("custom-attribute-dialog"),isEmptyOrWhitespace(t.Message)?(WarningAlert(window.Server.App.LocalizationContent.EditCustomAttribute,window.Server.App.LocalizationContent.UpdateCustomAttributeFailure,t.ErrorMessage,7e3),e[0].hide()):($("#custom-attribute-name").addClass("e-error"),$("#custom-attribute-form").valid()))}}))}function removeCustomAttribute(t){var e="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl,t={Id:$(t).attr("data-id"),CreatedDate:new Date,ModifiedDate:new Date},n={customAttribute:JSON.stringify(t)},n=e?(deleteCustomAttributeUrl=deleteUserCustomAttributeUrl,{customAttribute:JSON.stringify(t)}):{customAttribute:JSON.stringify(t),tenantInfoId:tenantInfoId};showWaitingPopup("messageBox"),$.ajax({type:"POST",url:deleteCustomAttributeUrl,data:n,success:function(t){t.Status?(getSiteOrUseAttributes(),hideWaitingPopup("messageBox"),SuccessAlert(window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteCustomAttributeSuccess,7e3)):(hideWaitingPopup("messageBox"),WarningAlert(window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteCustomAttributeFailure,t.Message,7e3)),hideWaitingPopup("messageBox"),onCloseMessageBox()}})}function editCustomAttribute(t){var e=$(t).attr("data-id"),t=$(t).attr("name");isAttributeEdit=!0,openCustomAttributeDialog(e,t)}function getSiteOrUseAttributes(){"undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?(showWaitingPopup("UsersAttributesGrid"),$.ajax({type:"GET",url:userAttributesUrl,data:{userId:userId},success:function(t){t.Status&&(document.getElementById("UsersAttributesGrid").ej2_instances[0].dataSource=t.Attributes),hideWaitingPopup("UsersAttributesGrid")}})):(showWaitingPopup("SiteAttributesGrid"),$.ajax({type:"GET",url:siteAttributesUrl,data:{tenantInfoId:tenantInfoId},success:function(t){t.Status&&(document.getElementById("SiteAttributesGrid").ej2_instances[0].dataSource=t.Attributes),hideWaitingPopup("SiteAttributesGrid")}}))}function updateValidationMessages(){document.getElementById("custom-attribute-name").ej2_instances[0].value=null,document.getElementById("custom-attribute-value").ej2_instances[0].value=null,document.getElementById("custom-attribute-descrition").ej2_instances[0].value=null,$("#encrypt-custom-attribute").prop("checked",!1),$("#custom-attribute-name, #custom-attribute-value").removeClass("e-error"),$("#custom-attribute-name, #custom-attribute-value").closest(".e-outline").siblings(".custom-attr-validation-errors").html(""),$("#custom-attribute-name, #custom-attribute-value").parent("div").removeClass("e-error")}function deleteConfirmation(e){setTimeout(function(){var t=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0],t=t.getCurrentViewRecords()[t.getSelectedRowIndexes()];messageBox("su-delete",window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteAttributeConfirm.format(" - <span class ='highlight-name'>",t.Name,"</span>"),"error",function(){removeCustomAttribute(e)},function(){clearAttributeSelection()})},100)}function clearAttributeSelection(){var t=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];t.clearSelection(),onCloseMessageBox()}function initialSiteGridCreate(){window.location.search.includes("tab=attributes")&&showWaitingPopup("SiteAttributesGrid")}function addSiteLevelAttribute(t){var e=document.getElementById("custom-attribute-dialog").ej2_instances,t=(addSiteAttribute.push(t),document.getElementById("AddSiteAttributesGrid").ej2_instances[0]);t.dataSource=addSiteAttribute,t.refresh(),hideWaitingPopup("custom-attribute-dialog"),e[0].hide()}function nameCheckAtAddTenant(){var n=$("#custom-attribute-name").val().trim();$.each(addSiteAttribute,function(t,e){e.Name.toLowerCase()==n.toLowerCase()&&$("#custom-attribute-name").addClass("e-error"),$("[name='custom-attribute-name']").valid()})}function updateSiteLevelAttribute(t){var e=document.getElementById("custom-attribute-dialog").ej2_instances,n=document.getElementById("AddSiteAttributesGrid").ej2_instances[0];addSiteAttribute.splice(currentIndex,1),addSiteAttribute.push(t),n.refresh(),hideWaitingPopup("custom-attribute-dialog"),e[0].hide()}function removeSiteAttribute(){var t=document.getElementById("AddSiteAttributesGrid").ej2_instances[0];addSiteAttribute.splice(t.getSelectedRowIndexes(),1),t.refresh()}function multiLineInputBoxInitialization(t){new ejs.inputs.TextBox({cssClass:"e-outline e-custom e-non-float",floatLabelType:"Never",multiline:!0}).appendTo(t)}$(document).ready(function(){var t=new ejs.inputs.TextBox({cssClass:"e-outline e-custom e-non-float",floatLabelType:"Never"});String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a},t.appendTo("#custom-attribute-name"),multiLineInputBoxInitialization("#custom-attribute-value"),multiLineInputBoxInitialization("#custom-attribute-descrition"),$("#custom-attribute-form").validate({errorElement:"span",onkeyup:function(t,e){9!==e.keyCode&&$(t).valid()},onfocusout:function(t){$(t).valid()},rules:{"custom-attribute-name":{isRequired:!0,isValidName:!0,isAttributeExist:!0},"custom-attribute-value":{isRequired:!0}},highlight:function(t){$(t).closest("div").addClass("e-error"),$(t).closest(".e-outline").addClass("e-error")},unhighlight:function(t){$(t).closest("div").removeClass("e-error"),$(t).closest(".e-outline").removeClass("e-error"),$(t).closest(".e-outline").siblings(".custom-attr-validation-errors").html("")},errorPlacement:function(t,e){$(e).closest(".e-outline").siblings(".custom-attr-validation-errors").html(t)},messages:{"custom-attribute-name":{isRequired:window.Server.App.LocalizationContent.AttributeNameValidator},"custom-attribute-value":{isRequired:window.Server.App.LocalizationContent.AttributeValueValidator}}}),$.validator.addMethod("isRequired",function(t,e){return!isEmptyOrWhitespace(t)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("isValidName",function(t,e){return IsValidName("name",t)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("isAttributeExist",function(t,e){return isAttributeExist(t)},window.Server.App.LocalizationContent.IsAttributeNameExist)}),$(document).on("keyup focusout","#custom-attribute-name",function(t){var e=$("#custom-attribute-name").val().toLowerCase().trim();"focusout"===t.type?isEmptyOrWhitespace(e)||!isEmptyOrWhitespace(customAttributeInfo)&&(isEmptyOrWhitespace(customAttributeInfo)||customAttributeInfo.Name.toLowerCase()==e)||(siteCreation?nameCheckAtAddTenant:attributeNameCheck)():($("#custom-attribute-name").removeClass("e-error"),$("[name='custom-attribute-name']").valid())}),$(document).ready(function(){var e=new ej.popups.Tooltip({target:".grid-content",position:"TopCenter",beforeRender:function(t){e.content=t.target.closest("td").innerText}},"#grid-tooltip");new ejs.grids.Grid({dataSource:null,gridLines:"None",allowSorting:!0,allowSearching:!1,allowPaging:!0,allowSelection:!0,allowFiltering:!1,pageSettings:{pageSize:10},enableHover:!0,enableAltRow:!1,dataBound:function(t){},columns:[{field:"Name",template:"#attribute-name-template",headerText:window.Server.App.LocalizationContent.Name,width:40,allowSorting:!0,allowFiltering:!0},{field:"Value",template:"#attribute-value-template",headerText:window.Server.App.LocalizationContent.Value,width:60,allowSorting:!0,allowFiltering:!0},{field:"Description",template:"#attribute-description-template",headerText:window.Server.App.LocalizationContent.Description,width:50,allowSorting:!0,allowFiltering:!0},{field:"ModifiedDateString",headerText:window.Server.App.LocalizationContent.LastModified,width:40,allowSorting:!0,allowFiltering:!1},{field:"Options",headerText:"",template:"#options",width:20,allowSorting:!1,allowFiltering:!1}]}).appendTo("#UsersAttributesGrid"),"undefined"!=typeof userAttributesUrl&&$.ajax({type:"GET",url:userAttributesUrl,data:{userId:userId},success:function(t){t.Status&&(document.getElementById("UsersAttributesGrid").ej2_instances[0].dataSource=t.Attributes),hideWaitingPopup("UsersAttributesGrid")}})});